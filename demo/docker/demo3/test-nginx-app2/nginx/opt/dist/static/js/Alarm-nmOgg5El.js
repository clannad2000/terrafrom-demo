var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;import{E as p}from"./ElectronicFence-d-yifEca.js";import{u as n}from"./ElectronicFence-HI2dfd04.js";import{d as i,a0 as c,A as u,Y as f,at as m,X as g,r as d,j as v,o as w,c as h,w as b,b as x,h as y,u as z,aL as N,v as j,a5 as P,R as O,U as C,e as S,a1 as _,_ as I}from"./index-OtYEJMgP.js";const k={class:"table-container tree-container w-full h-full flex flex-col gap-y-2"},A=(e=>(O("data-v-16a7b606"),e=e(),C(),e))((()=>S("div",{class:"flex flex-row items-center"},[S("span",{class:"alarm-title"},"越界告警列表")],-1))),E={class:"flex-1 flex flex-row"},R=i((U=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&o(e,t,a[t]);if(r)for(var t of r(a))s.call(a,t)&&o(e,t,a[t]);return e})({},{name:"Alarm"}),a(U,t({__name:"Alarm",setup(e){const a=c({fenceId:""}),t=c({pageNum:1,pageSize:10,total:0}),r=()=>{i()},l=()=>{t.pageNum=1,i()},s=u(!1),o=f([]),i=P((()=>{return e=this,r=null,l=function*(){o.value=[];const{pageSize:e,pageNum:r}=t,{fenceId:l}=a;l&&(s.value=!0,yield p({fenceId:l,pageSize:e,pageNum:r}).then((e=>{if(_!==e){const{rows:a=[],total:r=0}=e;o.value=a,t.total=Number(r)||0}})).finally((()=>{s.value=!1})))},new Promise(((a,t)=>{var s=e=>{try{p(l.next(e))}catch(a){t(a)}},o=e=>{try{p(l.throw(e))}catch(a){t(a)}},p=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);p((l=l.apply(e,r)).next())}));var e,r,l}),1e3);return m((()=>n().fenceParams),(()=>{var e;a.fenceId=(null==(e=n().fenceParams.value)?void 0:e.id)||"",g((()=>{t.pageNum=1,i()}))}),{deep:!0,immediate:!0}),(e,a)=>{const p=d("el-table-column"),n=d("el-auto-resizer"),i=d("el-pagination"),c=v("loading");return w(),h("div",k,[A,b((w(),h("div",E,[x(n,null,{default:y((({height:e,width:a})=>[x(z(N),{ref:"tableRef",class:"cursor-pointer",height:e,data:o.value,"show-overflow-tooltip":"",style:j({width:a+"px"})},{default:y((()=>[x(p,{prop:"fenceAlarmCreatedAt",align:"center",label:"越界时间","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),x(p,{prop:"realName",align:"center",label:"人员","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),x(p,{prop:"deviceName",align:"center",label:"设备","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),x(p,{prop:"fenceName",align:"center",label:"电子围栏","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}})])),_:2},1032,["height","data","style"])])),_:1})])),[[c,s.value]]),x(i,{ref:"paginationRef","current-page":t.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>t.pageNum=e),"page-size":t.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>t.pageSize=e),small:"",background:"",layout:"total, sizes, prev, pager, next",total:t.total,"pager-count":5,"page-sizes":[10,20,30,40,50,100],onSizeChange:l,onCurrentChange:r},null,8,["current-page","page-size","total"])])}}}))));var U;const F=I(R,[["__scopeId","data-v-16a7b606"]]);export{F as default};
