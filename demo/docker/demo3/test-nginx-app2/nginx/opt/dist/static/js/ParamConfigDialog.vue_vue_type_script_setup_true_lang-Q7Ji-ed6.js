import{e,f as a}from"./ConfigManage-kSH0aid8.js";import{d as l,a8 as r,A as s,a0 as o,H as t,r as n,o as i,g as u,h as d,e as m,b as c,f as g,u as f,ab as p,a9 as v,a1 as b,a6 as h}from"./index-OtYEJMgP.js";const k={class:"dialog-footer"},w=l({__name:"ParamConfigDialog",emits:["register","confirm"],setup(l,{emit:w}){let x="";const _=w,[V,{closeDialog:y}]=r((e=>{const{type:a,data:l}=e;if(x=a,"edit"===a){const{id:e,name:a,value:r,remark:s}=l||{};Object.assign(q,{id:e,name:a,value:r,remark:s})}})),C=s(!1),j=s(null),$={name:[{required:!0,message:"请填写配置名称！",trigger:"blur"},{max:64,message:"配置名称长度不能超过64位！",trigger:"blur"}],value:[{required:!0,message:"请填写配置值！",trigger:"blur"},{max:64,message:"配置值长度不能超过64位！",trigger:"blur"}],remark:[{required:!1,max:256,message:"备注长度不能超过256位！",trigger:"blur"}]},q=o({id:"",name:"",value:"",remark:""}),P=function(){var e;C.value=!1,y(),x="",Object.assign(q,{id:"",name:"",value:"",remark:""}),null==(e=j.value)||e.clearValidate()},U=function(){var l;null==(l=j.value)||l.validate((l=>{return r=this,s=null,o=function*(){if(l){C.value=!0;const{id:l,name:r,value:s,remark:o}=q;"add"===x?e({name:r,value:s,remark:o}).then((e=>{b!==e&&(h.success("添加配置成功！"),P(),_("confirm"))})).finally((()=>{C.value=!1})):"edit"===x?a({id:l,name:r,value:s,remark:o}).then((e=>{b!==e&&(h.success("编辑配置成功！"),P(),_("confirm"))})).finally((()=>{C.value=!1})):C.value=!1}},new Promise(((e,a)=>{var l=e=>{try{n(o.next(e))}catch(l){a(l)}},t=e=>{try{n(o.throw(e))}catch(l){a(l)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,t);n((o=o.apply(r,s)).next())}));var r,s,o}))};return t((()=>{P()})),(e,a)=>{const l=n("el-input"),r=n("el-form-item"),s=n("el-button");return i(),u(f(v),{width:"720px","show-fullscreen":!1,"show-close":!1,"close-on-click-modal":!1,"destroy-on-close":"",center:"",onClose:P,onRegister:f(V)},{footer:d((()=>[m("span",k,[c(s,{class:"basic-button",disabled:C.value,onClick:P},{default:d((()=>[g(" 取消 ")])),_:1},8,["disabled"]),c(s,{class:"basic-button",loading:C.value,onClick:U},{default:d((()=>[g(" 保存 ")])),_:1},8,["loading"])])])),default:d((()=>[c(f(p),{ref_key:"refConfigForm",ref:j,model:q,rules:$,"label-width":"80px"},{default:d((()=>[c(r,{label:"配置名称",prop:"name"},{default:d((()=>[c(l,{modelValue:q.name,"onUpdate:modelValue":a[0]||(a[0]=e=>q.name=e),clearable:"",placeholder:"请填写配置名称",maxlength:"64","show-word-limit":"",disabled:C.value},null,8,["modelValue","disabled"])])),_:1}),c(r,{label:"配置值",prop:"value"},{default:d((()=>[c(l,{modelValue:q.value,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value=e),clearable:"",maxlength:"64","show-word-limit":"",placeholder:"请填写配置值",disabled:C.value,formatter:e=>e.replace(/^\s*|\s*$|\n/g,""),parser:e=>e.replace(/^\s*|\s*$|\n/g,"")},null,8,["modelValue","disabled","formatter","parser"])])),_:1}),c(r,{label:"备注",prop:"remark"},{default:d((()=>[c(l,{modelValue:q.remark,"onUpdate:modelValue":a[2]||(a[2]=e=>q.remark=e),clearable:"",maxlength:"256",rows:4,type:"textarea","show-word-limit":"",placeholder:"请填写备注",disabled:C.value,parser:e=>e.replace(/^\s*|\s*$|\n/g,""),formatter:e=>e.replace(/^\s*|\s*$|\n/g,"")},null,8,["modelValue","disabled","parser","formatter"])])),_:1})])),_:1},8,["model"])])),_:1},8,["onRegister"])}}});export{w as _};
