import{t as e,a as t}from"./installCanvasRenderer-kp6nwiR2.js";import{d as n,Y as r,aT as i,aU as s,n as o,aV as a,at as _,am as l,F as u,H as c,x as d,u as f,X as v}from"./index-OtYEJMgP.js";var h=null;var p=null;function g(e,t){void 0===t&&(t={});var n=document.createElement(e);return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}function m(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function z(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if("none"===m(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var b=0,w=null;function y(e,t){var n,r;if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=O.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){var i=e.offsetWidth,s=e.offsetHeight,o=new ResizeObserver((function(){(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==i||e.offsetHeight!==s))&&x(e)})),a=z(e),_=a.detached,l=a.rendered;e.__resize_observer_triggered__=!1===_&&!1===l,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){x(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(b||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(r=document.createElement("style")).styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(r),w=r),function(e){var t=m(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};var n=g("div",{className:"resize-triggers"}),r=g("div",{className:"resize-expand-trigger"}),i=g("div"),s=g("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(s),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:s},C(e),e.addEventListener("scroll",E,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=z(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}e.__resize_listeners__.push(t),b++}function O(){var e=z(this),t=e.rendered,n=e.detached;t!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(C(this),this.addEventListener("scroll",E,!0)),this.__resize_rendered__=t,x(this))}function E(){var e,t,n=this;C(this),this.__resize_raf__&&(e=this.__resize_raf__,p||(p=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),p(e)),this.__resize_raf__=(t=function(){var e,t,r,i,s,o,a=(t=(e=n).__resize_last__,r=t.width,i=t.height,s=e.offsetWidth,o=e.offsetHeight,s!==r||o!==i?{width:s,height:o}:null);a&&(n.__resize_last__=a,x(n))},h||(h=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),h(t))}function x(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((function(t){t.call(e,e)}))}function C(e){var t=e.__resize_triggers__,n=t.expand,r=t.expandChild,i=t.contract,s=i.scrollWidth,o=i.scrollHeight,a=n.offsetWidth,_=n.offsetHeight,l=n.scrollWidth,u=n.scrollHeight;i.scrollLeft=s,i.scrollTop=o,r.style.width=a+1+"px",r.style.height=_+1+"px",n.scrollLeft=l,n.scrollTop=u}var L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},L.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var j=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];var A={autoresize:[Boolean,Object]},T=/^on[^a-z]/,S=function(e){return T.test(e)};function H(e,t){var n=f(e);return n&&"object"==typeof n&&"value"in n?n.value||t:n||t}var k={loading:Boolean,loadingOptions:Object},D=null,F="x-vue-echarts",M=[],N=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,s="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=M.indexOf(s);-1===o&&(o=M.push(s)-1,N[o]={}),n=N[o]&&N[o][r]?N[o][r]:N[o][r]=a()}else n=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var o="prepend"===r?"afterbegin":"beforeend";return s.insertAdjacentElement(o,e),e}}("x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}\n",{});var R=function(){if(null!=D)return D;if("undefined"==typeof HTMLElement||"undefined"==typeof customElements)return D=!1;try{new Function("tag","class EChartsElement extends HTMLElement {\n  __dispose = null;\n\n  disconnectedCallback() {\n    if (this.__dispose) {\n      this.__dispose();\n      this.__dispose = null;\n    }\n  }\n}\n\nif (customElements.get(tag) == null) {\n  customElements.define(tag, EChartsElement);\n}\n")(F)}catch(e){return D=!1}return D=!0}(),W=n({name:"echarts",props:L(L({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},A),k),emits:{},inheritAttrs:!1,setup:function(n,d){var f=d.attrs,h=r(),p=r(),g=r(),m=r(),z=i("ecTheme",null),O=i("ecInitOptions",null),x=i("ecUpdateOptions",null),C=s(n),A=C.autoresize,T=C.manualUpdate,k=C.loading,D=C.loadingOptions,F=o((function(){return m.value||n.option||null})),M=o((function(){return n.theme||H(z,{})})),N=o((function(){return n.initOptions||H(O,{})})),W=o((function(){return n.updateOptions||H(x,{})})),U=o((function(){return function(e){var t={};for(var n in e)S(n)||(t[n]=e[n]);return t}(f)})),q=a().proxy.$listeners;function B(e){if(p.value){var r=g.value=t(p.value,M.value,N.value);n.group&&(r.group=n.group);var i=q;i||(i={},Object.keys(f).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);"Once"===t.substring(t.length-4)&&(t="~".concat(t.substring(0,t.length-4))),i[t]=f[e]}))),Object.keys(i).forEach((function(e){var t=i[e];if(t){var n=e.toLowerCase();"~"===n.charAt(0)&&(n=n.substring(1),t.__once__=!0);var s=r;if(0===n.indexOf("zr:")&&(s=r.getZr(),n=n.substring(3)),t.__once__){delete t.__once__;var o=t;t=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];o.apply(void 0,e),s.off(n,t)}}s.on(n,t)}})),A.value?v((function(){r&&!r.isDisposed()&&r.resize(),s()})):s()}function s(){var t=e||F.value;t&&r.setOption(t,W.value)}}function P(){g.value&&(g.value.dispose(),g.value=void 0)}var I=null;_(T,(function(e){"function"==typeof I&&(I(),I=null),e||(I=_((function(){return n.option}),(function(e,t){e&&(g.value?g.value.setOption(e,L({notMerge:e!==t},W.value)):B())}),{deep:!0}))}),{immediate:!0}),_([M,N],(function(){P(),B()}),{deep:!0}),l((function(){n.group&&g.value&&(g.value.group=n.group)}));var V,X,Y,Z,$,G=function(e){return t=Object.create(null),j.forEach((function(n){t[n]=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,n)}}(n)})),t;var t}(g);return V=g,X=k,Y=D,Z=i("ecLoadingOptions",{}),$=o((function(){return L(L({},H(Z,{})),null==Y?void 0:Y.value)})),l((function(){var e=V.value;e&&(X.value?e.showLoading($.value):e.hideLoading())})),function(t,n,r){var i=null;_([r,t,n],(function(t,n,r){var s=t[0],o=t[1],a=t[2];if(s&&o&&a){var _=!0===a?{}:a,l=_.throttle,u=void 0===l?100:l,c=_.onResize,d=function(){o.resize(),null==c||c()};i=u?e(d,u):d,y(s,i)}r((function(){s&&i&&function(e,t){var n=e.__resize_listeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",E),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}! --b&&w&&w.parentNode.removeChild(w)}}(s,i)}))}))}(g,A,p),u((function(){B()})),c((function(){R&&h.value?h.value.__dispose=P:P()})),L({chart:g,root:h,inner:p,setOption:function(e,t){n.manualUpdate&&(m.value=e),g.value?g.value.setOption(e,t||{}):B(e)},nonEventAttrs:U},G)},render:function(){var e=L({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",d(F,e,[d("div",{ref:"inner",class:"echarts-inner"})])}});export{W as B};
