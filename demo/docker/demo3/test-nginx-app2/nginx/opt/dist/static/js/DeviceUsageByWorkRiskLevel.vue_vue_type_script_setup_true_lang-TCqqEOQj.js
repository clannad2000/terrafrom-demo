var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;import{B as l}from"./index.esm.min-p6OgvXm7.js";import{c as s}from"./StatisticalCenter-fzPo9Omj.js";import{E as m}from"./icon_no_data-JkxAPqfn.js";import{d as c,a0 as u,Y as p,A as f,n as d,V as v,r as y,o as g,c as j,g as h,u as b,b as w,a5 as x,a1 as k}from"./index-OtYEJMgP.js";import{e as O}from"./mitt-ei5ABelY.js";import{u as D,i as R}from"./installCanvasRenderer-kp6nwiR2.js";import{i as S}from"./install-50C6z8uZ.js";import{i as L}from"./install-nwvgNUQF.js";import{i as P}from"./install-XFuIEcts.js";const I={class:"w-full h-full"},C={key:1,class:"flex-1 flex flex-row items-center justify-center"},E=c((T=((e,t)=>{for(var a in t||(t={}))i.call(t,a)&&n(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&n(e,a,t[a]);return e})({},{name:"DeviceUsageByWorkRiskLevel"}),t(T,a({__name:"DeviceUsageByWorkRiskLevel",props:{orgId:{default:""},majorTypes:{default:()=>[]},workRiskLevels:{default:()=>[]},time:{default:()=>[]}},setup(e){D([R,S,L,P]);const t=e,a=u({orgId:"",majorType:"",beginDate:"",endDate:""}),r=["#E84200","#F78A38","#E3CD00","#409AF3","#0BC467"],i=p([]),o=f(!1),n=x((()=>{return e=this,t=null,n=function*(){o.value=!0,i.value=[],s(a).then((e=>{k!==e&&(i.value=e.map(((e,t)=>({name:e.workRiskLevelName,value:Number(e.count),workRiskLevel:e.workRiskLevel,itemStyle:{color:r[t]},textStyle:{color:r[t]}}))))})).finally((()=>{o.value=!1}))},new Promise(((a,r)=>{var i=e=>{try{l(n.next(e))}catch(t){r(t)}},o=e=>{try{l(n.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,o);l((n=n.apply(e,t)).next())}));var e,t,n}),1e3),c=d((()=>({title:{text:""},tooltip:{trigger:"item",formatter:function(e){return e.name+" "+e.value+" ("+e.percent.toFixed(0)+"%)"}},legend:{orient:"vertical",x:"right",y:"center",padding:[0,0,0,0],align:"left",itemWidth:10,itemHeight:10,itemGap:20,formatter:function(e){const t=i.value;let a=0,r=0;for(let i=0;i<t.length;i++)a+=parseInt(t[i].value),t[i].name==e&&(r=parseFloat(t[i].value));const o=r;let n;return n=0==a?0:Math.round(r/a*100),`{name| ${e} }{value|${o}}{p|${n}%}`},textStyle:{color:"auto",fontSize:14,rich:{name:{padding:[0,0,0,10],color:"#fff"},value:{width:30,padding:[0,20,0,20]},p:{color:"#fff"}}},data:i.value},series:[{name:"",type:"pie",radius:"85%",center:["30%","50%"],data:i.value,label:{show:!1},labelLine:{show:!1},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]})));return v((()=>{O.on("StatisticalCenterAppliedStatisticsReload",(()=>{const{orgId:e,majorTypes:r,time:i=[]}=t,[o="",l=""]=i;Object.assign(a,{orgId:e,majorType:r.join(","),beginDate:o,endDate:l}),n()}))})),(e,t)=>{const a=y("el-empty");return g(),j("div",I,[i.value.length>0?(g(),h(b(l),{key:0,ref:"vchart",class:"flex-1 flex",option:c.value,autoresize:""},null,8,["option"])):(g(),j("div",C,[w(a,{description:"暂无数据",image:b(m),"image-size":80},null,8,["image"])]))])}}}))));var T;export{E as _};
