var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o;import{B as i}from"./index.esm.min-p6OgvXm7.js";import{k as n}from"./StatisticalCenter-fzPo9Omj.js";import{d as c,a0 as f,A as p,Y as m,n as u,aD as d,V as v,a2 as y,o as b,c as k,e as w,J as g,L as j,t as x,I as h,u as L,b as R,a5 as S,a1 as O,_ as A}from"./index-OtYEJMgP.js";import{e as P}from"./mitt-ei5ABelY.js";import{i as D}from"./install-FXlg7-M8.js";import{u as I,L as T,i as C}from"./installCanvasRenderer-kp6nwiR2.js";import{i as M}from"./install-wLyK8H0F.js";import{i as W}from"./install-nwvgNUQF.js";import{i as _}from"./install-XFuIEcts.js";import{i as z}from"./install-8-Qe0jiJ.js";import"./Axis-xmqQ_bGV.js";import"./dataSample-MvCW8qRP.js";import"./createSeriesData-rVoIjXPv.js";import"./sectorHelper-nVwTOMBE.js";const B={class:"w-full h-full flex flex-col"},E={class:"w-full flex flex-row items-center flex-nowrap overflow-x-auto py-1"},G=["onClick"],U={class:"btn-text"},H={class:"flex-1 flex flex-col"},N=c((J=((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&l(e,r,t[r]);return e})({},{name:"WorkRiskLevelUsageByMajorType"}),V={__name:"WorkRiskLevelUsageByMajorType",props:{orgId:{default:""},workRiskLevels:{default:()=>[]},time:{default:()=>[]}},setup(e){I([M,W,_,D,z,C]);const t=e,r=f({majorType:"",orgId:"",workRiskLevel:"",beginDate:"",endDate:""}),o=p(!1),a=m([]),s=(e=[],t=[],r=y().workRiskLevelList)=>{const o=Object.freeze([]),a=new Map((r||o).map((e=>[e.code,{workRiskLevel:e.code,workRiskLevelName:e.name,"未使用":"0","已使用":"0"}])));return[e||o,t||o].forEach(((e,t)=>{e.forEach((e=>{const r=a.get(e.workRiskLevel);r&&(r[0===t?"未使用":"已使用"]=e.count)}))})),Array.from(a.values()).sort(((e,t)=>e.workRiskLevel.localeCompare(t.workRiskLevel)))},l=S((()=>{return e=this,t=null,l=function*(){o.value=!0,a.value=s([],[]),n(r).then((e=>{if(O!==e){const{notUsage:t=[],usage:r=[]}=e;a.value=s(t,r)}})).finally((()=>{o.value=!1}))},new Promise(((r,o)=>{var a=e=>{try{i(l.next(e))}catch(t){o(t)}},s=e=>{try{i(l.throw(e))}catch(t){o(t)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);i((l=l.apply(e,t)).next())}));var e,t,l}),1e3),c=u((()=>({color:["rgba(250,232,0,1)","rgba(14,255,255,1)"],legend:{itemWidth:10,itemHeight:10,itemGap:30,textStyle:{color:"#fff",fontSize:14}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{dimensions:["workRiskLevelName","未使用","已使用"],source:d(a.value)},xAxis:{type:"category",show:!0,axisTick:{show:!1},textStyle:{color:"#528BA4"},axisLabel:{show:!0,interval:0,textStyle:{color:"#fff",fontSize:14,fontWeight:500},formatter:function(e){let t="";const r=e.length,o=Math.ceil(r/4);if(r>4)for(let a=0;a<o;a++){let s="";const l=4*a,i=l+4;s=a==o-1?e.substring(l,r):e.substring(l,i)+"\n",t+=s}else t=e;return t}}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#528BA4"},show:!0},axisLabel:{textStyle:{color:"rgba(255,255,255,0.8)"}}},series:[{type:"bar",barWidth:10,barGap:"50%",itemStyle:{color:function(){return new T(0,0,0,1,[{offset:0,color:"rgba(250,232,0,1)"},{offset:1,color:"rgba(250,232,0,0)"}])}}},{type:"bar",barWidth:10,barGap:"50%",itemStyle:{color:function(){return new T(0,0,0,1,[{offset:0,color:"rgba(14,255,255,1)"},{offset:1,color:"rgba(14,255,255,0)"}])}}}]})));return v((()=>{var e;r.majorType=(null==(e=y().workerMajorList[0])?void 0:e.code)||"",P.on("StatisticalCenterAppliedStatisticsReload",(()=>{const{orgId:e,workRiskLevels:o,time:a=[]}=t,[s="",i=""]=a;Object.assign(r,{orgId:e,workRiskLevel:o.join(","),beginDate:s,endDate:i}),l()}))})),(e,t)=>(b(),k("div",B,[w("div",E,[(b(!0),k(g,null,j(L(y)().workerMajorList,(e=>(b(),k("div",{key:e.code,class:x(["tab-btn cursor-pointer",{active:r.majorType===e.code}]),onClick:t=>{return o=e.code,r.majorType=o,void l();var o}},[w("span",U,h(e.name),1)],10,G)))),128))]),w("div",H,[R(L(i),{ref:"vchart",class:"w-full h-full",option:c.value,autoresize:""},null,8,["option"])])]))}},t(J,r(V))));var J,V;const Y=A(N,[["__scopeId","data-v-1ba2dfa8"]]);export{Y as default};
