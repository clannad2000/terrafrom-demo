var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{d as o,Y as n,Z as f,n as u,A as d,a0 as c,ao as v,ap as m,r as p,j as y,o as h,c as g,e as b,b as x,h as _,u as j,aa as k,f as w,w as N,v as O,N as P,J as R,L as T,t as C,I as H,g as I,a1 as D,X as V,R as z,U as A,_ as U}from"./index-OtYEJMgP.js";import{g as q,d as E}from"./HelpCenter-dVii1H6s.js";import F from"./filePreview-WcjWM59u.js";import"./icon_download-H10JPDv3.js";const J=[(e=>(z("data-v-2cf939ad"),e=e(),A(),e))((()=>b("span",{class:"file-list-title"},"全部文档",-1)))],L={key:0,class:"loading-cove"},S=["data-id"],X={key:1,class:"no-selected-data"},Y={key:0,class:"slt-file-box"},Z={key:1},$={key:2},B=o((G=((e,a)=>{for(var l in a||(a={}))i.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e})({},{name:"HelpDocument"}),a(G,l({__name:"index",setup(e){const a=n(),{height:l}=f(a),t=n(),{height:i}=f(t),s=n(),{height:r}=f(s),o=n(),{height:z}=f(o),A=u((()=>({height:i.value-r.value-z.value+"px"}))),U=d(!1),B=c({fileName:""}),G=n([]),K=()=>{return e=this,a=null,l=function*(){U.value=!0,G.value=[];const{fileName:e}=B;yield q({fileName:e,function:"HelpDocument"}).then((e=>{D!==e&&(G.value=e)})).finally((()=>{U.value=!1}))},new Promise(((t,i)=>{var s=e=>{try{o(l.next(e))}catch(a){i(a)}},r=e=>{try{o(l.throw(e))}catch(a){i(a)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,r);o((l=l.apply(e,a)).next())}));var e,a,l},M=d(""),Q=c({fileName:"",documentType:"",url:""}),W=d(!1),ee=d(""),ae=e=>{if("file-list-item"===e.target.className){W.value=!1;const a=e.target.dataset.id,l=G.value.find((e=>e.id===a));l&&(M.value="doc_"+a,ee.value="1",E({fileId:l.id}).then((e=>{var a;e&&(null==e?void 0:e.data)?(Object.assign(Q,{fileName:l.fileName,documentType:l.fileType,url:(a=l.id,a?`/js-zygk-admin/file/info/media/preview/${a}`:"")}),V((()=>{W.value=!0,ee.value=""}))):ee.value="2"})))}};return v((()=>{K()})),m((()=>{U.value=!1,W.value=!1,M.value="",ee.value="",B.fileName="",Object.assign(Q,{fileName:"",documentType:"",url:""}),G.value=[]})),(e,i)=>{const r=p("el-button"),n=p("el-input"),f=p("el-form-item"),u=p("el-form"),d=y("loading");return h(),g("div",{ref_key:"compRef",ref:a,class:"w-full h-full grid grid-cols-[30%_1fr] gap-x-4"},[b("div",{ref_key:"leftContainerRef",ref:t,class:"left-container flex flex-col",style:O({height:j(l)+"px"})},[x(u,{ref_key:"searchFormRef",ref:s,inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:_((()=>[x(f,{class:"m-0"},{default:_((()=>[x(n,{modelValue:B.fileName,"onUpdate:modelValue":i[0]||(i[0]=e=>B.fileName=e),clearable:"",placeholder:"请输入文档名称",maxlength:"20"},{prepend:_((()=>[x(r,{icon:j(k)},null,8,["icon"])])),append:_((()=>[x(r,{onClick:K},{default:_((()=>[w("搜索")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},512),b("div",{ref_key:"leftTitleRef",ref:o,class:"h-[36px] flex flex-row items-center"},J,512),N((h(),g("div",{style:O(A.value),class:"flex flex-col overflow-y-auto file-list-box",onClick:ae},[U.value?(h(),g("div",L,"资源文件加载中，请稍等...")):P("",!0),(h(!0),g(R,null,T(G.value,(e=>(h(),g("div",{key:e.id,"data-id":e.id,class:C(["file-list-item",{"file-selected-class":M.value==="doc_"+e.id}])},H(e.fileName),11,S)))),128))],4)),[[d,U.value]])],4),b("div",{ref:"rightContainerRef",style:O({height:j(l)+"px"})},[W.value?(h(),I(F,{key:0,"document-type":Q.documentType,url:Q.url,"file-name":Q.fileName},null,8,["document-type","url","file-name"])):(h(),g("div",X,[ee.value?"1"==ee.value?(h(),g("div",Z,"资源文件下载中，请稍等...")):"2"==ee.value?(h(),g("div",$,"资源文件下载失败！")):P("",!0):(h(),g("div",Y))]))],4)],512)}}}))));var G;const K=U(B,[["__scopeId","data-v-2cf939ad"]]);export{K as default};
