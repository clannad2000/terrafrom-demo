var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{a as n}from"./StatisticalCenter-fzPo9Omj.js";import{u as i}from"./useAutoScroll-cuZfK63C.js";import{d as p,a0 as c,Y as u,n as f,A as d,V as w,r as m,o as v,c as b,b as h,h as y,v as g,u as j,f as k,I as x,a5 as C,a1 as O,X as R,_ as T}from"./index-OtYEJMgP.js";import{e as D}from"./mitt-ei5ABelY.js";const P={class:"w-full h-full flex flex-col"},_=p((I=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&l(e,t,a[t]);return e})({},{name:"DeviceUsageByMajorTypeRank"}),a(I,t({__name:"DeviceUsageByMajorTypeRank",props:{orgId:{default:""},majorTypes:{default:()=>[]},workRiskLevels:{default:()=>[]},time:{default:()=>[]}},emits:["onTrendDialog"],setup(e,{emit:a}){const t=a,o=e,r=c({orgId:"",majorType:"",workRiskLevel:"",beginDate:"",endDate:""}),s=u(),l=f((()=>s.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:p,stop:T}=i({scrollRef:l}),_=d(!1),I=u([]),M=C((()=>{return e=this,a=null,t=function*(){T(),_.value=!0,I.value=[],n(r).then((e=>{O!==e&&(I.value=e,R((()=>{p()})))})).finally((()=>{_.value=!1}))},new Promise(((o,r)=>{var s=e=>{try{n(t.next(e))}catch(a){r(a)}},l=e=>{try{n(t.throw(e))}catch(a){r(a)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,l);n((t=t.apply(e,a)).next())}));var e,a,t}),1e3),S=e=>{t("onTrendDialog",{type:"majorTypeUsage",data:e})};return w((()=>{D.on("StatisticalCenterAppliedStatisticsReload",(()=>{const{orgId:e,workRiskLevels:a,majorTypes:t,time:s=[]}=o,[l="",n=""]=s;Object.assign(r,{orgId:e,workRiskLevel:a.join(","),majorType:t.join(","),beginDate:l,endDate:n}),M()}))})),(e,a)=>{const t=m("el-table-column"),o=m("el-table"),r=m("el-auto-resizer");return v(),b("div",P,[h(r,null,{default:y((({height:e,width:a})=>[h(o,{ref_key:"tableRef",ref:s,class:"cursor-pointer",height:e,data:I.value,"show-overflow-tooltip":"",style:g({width:a+"px"}),onMouseover:j(T),onMouseleave:j(p),onRowClick:S},{default:y((()=>[h(t,{type:"index",label:"排名",width:"80",align:"center"}),h(t,{prop:"majorTypeName",align:"center",label:"专业","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"allCount",align:"center",label:"计划量","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"usageCount",align:"center",label:"已使用","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"usagePercent",align:"center",label:"使用率","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:y((({row:e})=>[k(x(`${e.usagePercent}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])}}}))));var I;const M=T(_,[["__scopeId","data-v-9c65f13a"]]);export{M as default};
