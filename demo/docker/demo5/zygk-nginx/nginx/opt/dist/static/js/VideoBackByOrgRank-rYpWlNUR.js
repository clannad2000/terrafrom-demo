var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{j as i}from"./StatisticalCenter-fzPo9Omj.js";import{u as n}from"./useAutoScroll-cuZfK63C.js";import{d as p,a0 as c,Y as u,n as d,A as f,V as w,r as b,o as m,c as v,b as h,h as y,v as g,u as k,f as j,I as x,a5 as O,a1 as C,X as R,_ as P}from"./index-OtYEJMgP.js";import{e as _}from"./mitt-ei5ABelY.js";const D={class:"w-full h-full flex flex-col"},I=p((T=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&l(e,t,a[t]);return e})({},{name:"VideoBackByOrgRank"}),a(T,t({__name:"VideoBackByOrgRank",props:{orgId:{default:""},majorTypes:{default:()=>[]},workRiskLevels:{default:()=>[]},time:{default:()=>[]}},emits:["onTrendDialog"],setup(e,{emit:a}){const t=a,o=e,r=c({orgId:"",majorType:"",workRiskLevel:"",beginDate:"",endDate:""}),s=u(),l=d((()=>s.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:p,stop:P}=n({scrollRef:l}),I=f(!1),T=u([]),B=O((()=>{return e=this,a=null,t=function*(){P(),I.value=!0,T.value=[],i(r).then((e=>{C!==e&&(T.value=e,R((()=>{p()})))})).finally((()=>{I.value=!1}))},new Promise(((o,r)=>{var s=e=>{try{i(t.next(e))}catch(a){r(a)}},l=e=>{try{i(t.throw(e))}catch(a){r(a)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,l);i((t=t.apply(e,a)).next())}));var e,a,t}),1e3),S=e=>{t("onTrendDialog",{type:"cityOrgVideoBack",data:e})};return w((()=>{_.on("StatisticalCenterAppliedStatisticsReload",(()=>{const{orgId:e,workRiskLevels:a,majorTypes:t,time:s=[]}=o,[l="",i=""]=s;Object.assign(r,{orgId:e,workRiskLevel:a.join(","),majorType:t.join(","),beginDate:l,endDate:i}),B()}))})),(e,a)=>{const t=b("el-table-column"),o=b("el-table"),r=b("el-auto-resizer");return m(),v("div",D,[h(r,null,{default:y((({height:e,width:a})=>[h(o,{ref_key:"tableRef",ref:s,class:"cursor-pointer",height:e,data:T.value,"show-overflow-tooltip":"",style:g({width:a+"px"}),onMouseover:k(P),onMouseleave:k(p),onRowClick:S},{default:y((()=>[h(t,{type:"index",label:"排名",width:"80",align:"center"}),h(t,{prop:"orgName",align:"center",label:"管理单位","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"allCount",align:"center",label:"已记录作业数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"backCount",align:"center",label:"已回传作业数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"backPercent",align:"center",label:"回传率百分比","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:y((({row:e})=>[j(x(`${e.backPercent}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])}}}))));var T;const B=P(I,[["__scopeId","data-v-30d43145"]]);export{B as default};
