var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{i as p}from"./DeviceManage-aryRM0Sb.js";import{d as n}from"./constants-uiyZ18jc.js";import{d as u,A as i,a0 as d,F as c,r as g,j as m,w as b,o as f,c as w,e as h,b as v,h as x,u as y,f as _,I as j,a1 as z}from"./index-OtYEJMgP.js";const V={class:"h-full table-container"},k={class:"flex flex-col h-full gap-y-4"},C=u((O=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e})({},{name:"UpgradeLogIndex"}),a(O,l({__name:"index",setup(e){const a=i(!1),l=d({condition:"",upgradeResult:"",time:n.range.default}),t=i([]),o=d({pageNum:1,pageSize:10,total:0}),s=()=>{a.value=!0;const{pageSize:e,pageNum:s}=o,{condition:r,upgradeResult:n,time:u}=l,[i,d]=u;p({condition:r,upgradeResult:n,beginDate:i,endDate:d,pageSize:e,pageNum:s}).then((e=>{if(e&&z!==e){const{rows:a=[],total:l=0}=e;t.value=a,o.total=Number(l)||0}})).finally((()=>{a.value=!1}))},r=()=>{o.pageNum=1,s()},u=()=>{s()};return c((()=>{s()})),(e,s)=>{const p=g("el-input"),i=g("el-form-item"),d=g("el-date-picker"),c=g("el-option"),z=g("el-select"),C=g("el-button"),O=g("el-form"),N=g("el-table-column"),R=g("el-tag"),S=g("el-table"),D=g("el-pagination"),P=m("loading");return b((f(),w("div",V,[h("div",k,[v(O,{inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:x((()=>[v(i,{label:"程序",class:"m-0"},{default:x((()=>[v(p,{modelValue:l.condition,"onUpdate:modelValue":s[0]||(s[0]=e=>l.condition=e),clearable:"",placeholder:"请输入程序版本/文件名",maxlength:"20"},null,8,["modelValue"])])),_:1}),v(i,{label:"日期",class:"m-0"},{default:x((()=>[v(d,{modelValue:l.time,"onUpdate:modelValue":s[1]||(s[1]=e=>l.time=e),"value-format":"YYYY-MM-DD",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,editable:!1,shortcuts:y(n).range.shortcuts,"disabled-date":e=>e.getTime()>Date.now()},null,8,["modelValue","shortcuts","disabled-date"])])),_:1}),v(i,{label:"状态",class:"m-0"},{default:x((()=>[v(z,{modelValue:l.upgradeResult,"onUpdate:modelValue":s[2]||(s[2]=e=>l.upgradeResult=e),placeholder:"请选择状态",clearable:""},{default:x((()=>[v(c,{value:"1",label:"升级成功"}),v(c,{value:"0",label:"升级失败"})])),_:1},8,["modelValue"])])),_:1}),v(i,{label:"",class:"m-0"},{default:x((()=>[v(C,{class:"basic-button",onClick:r},{default:x((()=>[_(" 查询 ")])),_:1})])),_:1})])),_:1}),v(S,{class:"w-full h-full",data:t.value},{default:x((()=>[v(N,{prop:"programVersion",align:"center",label:"程序版本","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),v(N,{prop:"programName",align:"center",label:"文件名","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),v(N,{prop:"upgradeTime",align:"center",label:"升级时间","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),v(N,{prop:"ipAddr",align:"center",label:"IP地址","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),v(N,{prop:"upgradeResult",align:"center",label:"状态","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:x((({row:e})=>[v(R,{type:"1"==e.upgradeResult?"success":"danger"},{default:x((()=>[_(j("1"==e.upgradeResult?"升级成功":"升级失败"),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data"]),v(D,{"current-page":o.pageNum,"onUpdate:currentPage":s[3]||(s[3]=e=>o.pageNum=e),"page-size":o.pageSize,"onUpdate:pageSize":s[4]||(s[4]=e=>o.pageSize=e),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:o.total,"page-sizes":[10,20,30,40,50,100],onSizeChange:r,onCurrentChange:u},null,8,["current-page","page-size","total"])])])),[[P,a.value]])}}}))));var O;export{C as _};
