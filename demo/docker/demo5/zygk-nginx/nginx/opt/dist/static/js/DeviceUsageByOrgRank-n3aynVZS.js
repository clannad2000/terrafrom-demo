var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{b as i}from"./StatisticalCenter-fzPo9Omj.js";import{u as n}from"./useAutoScroll-cuZfK63C.js";import{d as p,a0 as c,Y as u,n as f,A as d,V as w,r as v,o as m,c as b,b as g,h,v as y,u as j,f as k,I as x,a5 as O,a1 as C,X as R,_ as D}from"./index-OtYEJMgP.js";import{e as P}from"./mitt-ei5ABelY.js";const _={class:"w-full h-full flex flex-col"},I=p((T=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&l(e,t,a[t]);return e})({},{name:"DeviceUsageByOrgRank"}),a(T,t({__name:"DeviceUsageByOrgRank",props:{orgId:{default:""},majorTypes:{default:()=>[]},workRiskLevels:{default:()=>[]},time:{default:()=>[]}},emits:["onTrendDialog"],setup(e,{emit:a}){const t=a,o=e,r=c({orgId:"",majorType:"",workRiskLevel:"",beginDate:"",endDate:""}),s=u(),l=f((()=>s.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:p,stop:D}=n({scrollRef:l}),I=d(!1),T=u([]),S=O((()=>{return e=this,a=null,t=function*(){D(),I.value=!0,T.value=[],i(r).then((e=>{C!==e&&(T.value=e,R((()=>{p()})))})).finally((()=>{I.value=!1}))},new Promise(((o,r)=>{var s=e=>{try{i(t.next(e))}catch(a){r(a)}},l=e=>{try{i(t.throw(e))}catch(a){r(a)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,l);i((t=t.apply(e,a)).next())}));var e,a,t}),1e3),L=e=>{t("onTrendDialog",{type:"cityOrgUsage",data:e})};return w((()=>{P.on("StatisticalCenterAppliedStatisticsReload",(()=>{const{orgId:e,workRiskLevels:a,majorTypes:t,time:s=[]}=o,[l="",i=""]=s;Object.assign(r,{orgId:e,workRiskLevel:a.join(","),majorType:t.join(","),beginDate:l,endDate:i}),S()}))})),(e,a)=>{const t=v("el-table-column"),o=v("el-table"),r=v("el-auto-resizer");return m(),b("div",_,[g(r,null,{default:h((({height:e,width:a})=>[g(o,{ref_key:"tableRef",ref:s,class:"cursor-pointer",height:e,data:T.value,"show-overflow-tooltip":"",style:y({width:a+"px"}),onMouseover:j(D),onMouseleave:j(p),onRowClick:L},{default:h((()=>[g(t,{type:"index",label:"排名",width:"80",align:"center"}),g(t,{prop:"orgName",align:"center",label:"管理单位","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),g(t,{prop:"allCount",align:"center",label:"计划量","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),g(t,{prop:"usageCount",align:"center",label:"已使用","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),g(t,{prop:"usagePercent",align:"center",label:"使用率","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:h((({row:e})=>[k(x(`${e.usagePercent}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])}}}))));var T;const S=D(I,[["__scopeId","data-v-67e585b7"]]);export{S as default};
