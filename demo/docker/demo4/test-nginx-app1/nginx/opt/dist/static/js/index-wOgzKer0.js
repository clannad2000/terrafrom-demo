var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{d as s,z as i,A as p,a0 as u,F as c,r as g,j as f,o as d,g as m,h as b,w as _,c as y,e as v,b as w,u as h,aa as k,f as x,I as C,M as z,a1 as j,a6 as N}from"./index-OtYEJMgP.js";import{b as O,d as S}from"./RoleManage-0i99zGbG.js";import P from"./authResourceDialog-246o5EXf.js";import{_ as R}from"./editRoleDialog.vue_vue_type_script_setup_true_lang-QWNyKo_v.js";const D={class:"w-full h-full table-container"},F={class:"flex flex-col h-full gap-y-4"},I=s((M=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&r(e,l,a[l]);return e})({},{name:"RoleManageIndex"}),a(M,l({__name:"index",setup(e){const[a,{showDialog:l,setDialogProps:t}]=i({title:"新增角色"}),[o,{showDialog:n}]=i({title:"新增授权"}),r=p(!1),s=p(""),I=p([]),M=u({pageNum:1,pageSize:10,total:0}),U=()=>{r.value=!0;const{pageSize:e,pageNum:a}=M,l=s.value;O({condition:l,pageSize:e,pageNum:a}).then((e=>{if(e&&j!==e){const{rows:a=[],total:l=0}=e;I.value=a,M.total=Number(l)||0}})).finally((()=>{r.value=!1}))},V=()=>{M.pageNum=1,U()},$=()=>{U()},q=()=>{t({title:"新增角色"}),l(!0,{type:"add"})},A=function(){U()};return c((()=>{U()})),(e,i)=>{const p=g("el-icon"),u=g("el-input"),c=g("el-form-item"),O=g("el-button"),E=g("el-form"),B=g("el-table-column"),G=g("el-tag"),H=g("el-popconfirm"),J=g("el-table"),K=g("el-pagination"),L=g("el-main"),Q=f("loading");return d(),m(L,null,{default:b((()=>[_((d(),y("div",D,[v("div",F,[w(E,{inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:b((()=>[w(c,{label:"角色",class:"m-0"},{default:b((()=>[w(u,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),class:"mb-4",clearable:"",maxlength:"20",placeholder:"快速搜索角色",formatter:e=>e.replace(/^\s*|\s*$/g,""),parser:e=>e.replace(/^\s*|\s*$/g,"")},{prefix:b((()=>[w(p,{class:"el-input__icon"},{default:b((()=>[w(h(k))])),_:1})])),_:1},8,["modelValue","formatter","parser"])])),_:1}),w(c,{label:"",class:"m-0"},{default:b((()=>[w(O,{class:"basic-button",onClick:V},{default:b((()=>[x(" 查询 ")])),_:1}),w(O,{class:"basic-button",plain:"",onClick:q},{default:b((()=>[x(" 新增 ")])),_:1})])),_:1})])),_:1}),w(J,{class:"w-full h-full",data:I.value},{default:b((()=>[w(B,{type:"index",label:"序号",width:"80",align:"center"},{default:b((e=>[v("span",null,C((M.pageNum-1)*M.pageSize+e.$index+1),1)])),_:1}),w(B,{prop:"name",align:"center","show-overflow-tooltip":"",label:"角色名"}),w(B,{prop:"remark",align:"center",label:"角色描述","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),w(B,{prop:"enabledFlag",align:"center",label:"状态"},{default:b((({row:e})=>["1"==e.enabledFlag?(d(),m(G,{key:0,type:"success"},{default:b((()=>[x("启用")])),_:1})):(d(),m(G,{key:1,type:"danger"},{default:b((()=>[x("禁用")])),_:1}))])),_:1}),w(B,{fixed:"right",label:"操作",width:"200",align:"center"},{default:b((({row:e})=>[w(O,{type:"warning",link:"",onClick:a=>(e=>{n(!0,e)})(e)},{default:b((()=>[x(" 权限配置 ")])),_:2},1032,["onClick"]),w(O,{type:"primary",link:"",onClick:a=>{return o=e,t({title:"编辑角色"}),void l(!0,{type:"edit",data:o});var o}},{default:b((()=>[x(" 编辑 ")])),_:2},1032,["onClick"]),w(H,{title:"确认删除?",onConfirm:a=>(e=>{r.value=!0,S(e.id).then((e=>{j!==e&&(N.success("删除角色成功!"),M.pageNum=1,U())})).finally((()=>{r.value=!1}))})(e)},{reference:b((()=>[w(O,{link:"",type:"danger",onClick:i[1]||(i[1]=z((()=>{}),["stop"]))},{default:b((()=>[x(" 删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),w(K,{"current-page":M.pageNum,"onUpdate:currentPage":i[2]||(i[2]=e=>M.pageNum=e),"page-size":M.pageSize,"onUpdate:pageSize":i[3]||(i[3]=e=>M.pageSize=e),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:M.total,"page-sizes":[10,20,30,40,50,100],onSizeChange:V,onCurrentChange:$},null,8,["current-page","page-size","total"])])])),[[Q,r.value]]),w(R,{onRegister:h(a),onConfirm:A},null,8,["onRegister"]),w(P,{onRegister:h(o),onConfirm:A},null,8,["onRegister"])])),_:1})}}}))));var M;export{I as default};
