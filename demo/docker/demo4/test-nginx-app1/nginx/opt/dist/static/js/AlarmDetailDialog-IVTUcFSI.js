var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a,l)=>new Promise(((t,o)=>{var r=e=>{try{i(l.next(e))}catch(a){o(a)}},s=e=>{try{i(l.throw(e))}catch(a){o(a)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,s);i((l=l.apply(e,a)).next())}));import{d as n,a7 as d,Y as u,A as c,a0 as m,a8 as v,X as f,H as g,r as y,j as p,o as b,g as w,h,w as _,c as N,b as j,f as C,I as O,e as k,u as P,a9 as x,R,U as D,_ as M}from"./index-OtYEJMgP.js";const T=e=>(R("data-v-1e99f77c"),e=e(),D(),e),I={class:"flex-1 flex flex-col gap-y-2 my-2"},U=T((()=>k("div",{id:"map",class:"w-full h-80"},null,-1))),A={class:"alarm-marker"},E={class:"title"},L=T((()=>k("div",{class:"icon"},null,-1))),S=n((z=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&s(e,l,a[l]);return e})({},{name:"AlarmDetailDialog"}),a(z,l({__name:"AlarmDetailDialog",emits:["register","confirm"],setup(e,{emit:a}){const{commonMap:l}=d(),t=u(null),o=c(!1),r=m({alarmContent:"",workContent:"",workPlace:"",triggerUserRealName:"",deviceName:"",deviceCode:"",alarmTypeName:"",statusName:"",longitude:0,latitude:0,belongCityName:"",belongCountyName:"",majorTypeName:""}),[s,{closeDialog:n}]=v((e=>{const{type:a,data:l}=e;"view"===a&&(Object.keys(l).forEach((e=>{r[e]=l[e]})),M())})),R=function(){o.value=!1,n(),Object.keys(r).forEach((e=>{r[e]="longitude"===e||"latitude"===e?0:""})),T()},D=c(null),M=()=>i(this,null,(function*(){yield T(),console.log("initMap"),t.value=new l.Map({container:"map",style:"aegis://styles/aegis/Satellite512",center:[119.12477321074,33.074785125453],zoom:10,maxZoom:19.5,localIdeographFontFamily:"Microsoft YoHei"}),t.value.on("load",(e=>i(this,null,(function*(){new l.RoadNetLayer({map:t.value,style:"aegis://styles/aegis/Road-v2"}).render(),r.longitude&&r.latitude&&f((()=>{var e,a;t.value.flyTo({center:[r.longitude,r.latitude],zoom:14}),e=r.longitude,a=r.latitude,D.value||(D.value=new l.Marker({element:document.querySelector(".alarm-marker"),anchor:"bottom"}).setLngLat([e,a]).addTo(t.value))}))}))))})),T=()=>{console.log("destroyMap"),D.value&&(D.value.remove(),D.value=null),t.value&&(t.value.remove(),t.value=null)};return g((()=>{R()})),(e,a)=>{const l=y("el-descriptions-item"),t=y("el-descriptions"),i=p("loading");return b(),w(P(x),{width:"80%","show-close":!0,center:"","destroy-on-close":"","close-on-click-modal":!1,onClose:R,onRegister:P(s)},{default:h((()=>[_((b(),N("div",I,[j(t,{column:3},{default:h((()=>[j(l,{width:"33%",label:"告警内容："},{default:h((()=>[C(O(r.alarmContent),1)])),_:1}),j(l,{width:"33%",label:"作业内容："},{default:h((()=>[C(O(r.workContent),1)])),_:1}),j(l,{width:"33%",label:"作业地点："},{default:h((()=>[C(O(r.workPlace),1)])),_:1}),j(l,{width:"33%",label:"工作人员："},{default:h((()=>[C(O(r.triggerUserRealName),1)])),_:1}),j(l,{width:"33%",label:"设备名称："},{default:h((()=>[C(O(r.deviceName),1)])),_:1}),j(l,{width:"33%",label:"设备编号："},{default:h((()=>[C(O(r.deviceCode),1)])),_:1}),j(l,{width:"33%",label:"告警类型："},{default:h((()=>[C(O(r.alarmTypeName),1)])),_:1}),j(l,{width:"33%",label:"告警状态："},{default:h((()=>[C(O(r.statusName),1)])),_:1}),j(l,{width:"33%",label:"专业："},{default:h((()=>[C(O(r.majorTypeName),1)])),_:1}),j(l,{width:"33%",label:"地市："},{default:h((()=>[C(O(r.belongCityName),1)])),_:1}),j(l,{width:"33%",label:"区县："},{default:h((()=>[C(O(r.belongCountyName),1)])),_:1}),j(l,{width:"33%",label:"经度："},{default:h((()=>[C(O(r.longitude),1)])),_:1}),j(l,{width:"33%",label:"纬度："},{default:h((()=>[C(O(r.latitude),1)])),_:1})])),_:1}),U,k("div",A,[k("div",E,O(r.triggerUserRealName||"-"),1),L])])),[[i,o.value]])])),_:1},8,["onRegister"])}}}))));var z;const F=M(S,[["__scopeId","data-v-1e99f77c"]]);export{F as default};
