var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{d as p}from"./JobOverview-wJdELtdM.js";import{d as n,A as i,n as c,a0 as u,Y as g,a8 as f,H as b,r as m,o as d,g as w,h as v,e as y,b as h,u as O,a2 as x,c as z,J as C,L as j,f as k,a9 as S,a5 as _,a1 as N}from"./index-OtYEJMgP.js";const P={class:"flex-1 flex flex-col gap-y-4"},I=n((D=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e})({},{name:"JobPlanStatOfCityDialog"}),a(D,l({__name:"StatDialog",emits:["register","confirm"],setup(e,{emit:a}){const l=i(!1),t=c((()=>"各市级公司今日作业计划")),o=u({}),s=u({cityOrgId:""}),r=u({pageNum:1,pageSize:10,total:0}),n=g([]),I=_((()=>{return e=this,a=null,t=function*(){n.value=[],l.value=!0;const{pageSize:e,pageNum:a}=r,{cityOrgId:t}=s;p({cityOrgId:t,pageSize:e,pageNum:a}).then((e=>{if(e&&N!==e){const{rows:a=[],total:l=0}=e;n.value=a,r.total=Number(l)||0}})).finally((()=>{l.value=!1}))},new Promise(((l,o)=>{var s=e=>{try{p(t.next(e))}catch(a){o(a)}},r=e=>{try{p(t.throw(e))}catch(a){o(a)}},p=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,r);p((t=t.apply(e,a)).next())}));var e,a,t}),1e3),D=()=>{r.pageNum=1,I()},E=()=>{D()},F=()=>{I()},[J,{closeDialog:R}]=f((e=>{const{type:a,data:l}=e;"view"===a&&(Object.keys(l).forEach((e=>{o[e]=l[e]})),D())})),U=function(){l.value=!1,R(),Object.keys(o).forEach((e=>{o[e]=""})),Object.keys(s).forEach((e=>{s[e]=""})),Object.assign(r,{pageNum:1,pageSize:10,total:0}),n.value=[]};return b((()=>{U()})),(e,a)=>{const o=m("el-option"),p=m("el-select"),i=m("el-form-item"),c=m("el-button"),u=m("el-form"),g=m("el-table-column"),f=m("el-table"),b=m("el-pagination");return d(),w(O(S),{width:"75%","show-close":!0,center:"","destroy-on-close":"","close-on-click-modal":!1,title:t.value,onClose:U,onRegister:O(J)},{default:v((()=>[y("div",P,[h(u,{ref:"searchFormRef",inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:v((()=>[h(i,{label:"市级公司",class:"m-0"},{default:v((()=>[h(p,{modelValue:s.cityOrgId,"onUpdate:modelValue":a[0]||(a[0]=e=>s.cityOrgId=e),placeholder:"请选择市级公司",clearable:"",onFocus:O(x)().loadCityOrg},{default:v((()=>[(d(!0),z(C,null,j(O(x)().cityOrg,(e=>(d(),w(o,{key:e.id,value:e.id,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onFocus"])])),_:1}),h(i,{label:"",class:"m-0"},{default:v((()=>[h(c,{class:"basic-button",loading:l.value,onClick:D},{default:v((()=>[k(" 查询 ")])),_:1},8,["loading"])])),_:1})])),_:1},512),h(f,{class:"w-full h-96",data:n.value,"show-overflow-tooltip":""},{default:v((()=>[h(g,{prop:"cityOrgName",align:"center",label:"市级公司","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(g,{prop:"total",align:"center",label:"今日作业计划数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(g,{prop:"dzxCount",align:"center",label:"未执行","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(g,{prop:"zxzCount",align:"center",label:"执行中","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(g,{prop:"yjsCount",align:"center",label:"已完成","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}})])),_:1},8,["data"]),h(b,{"current-page":r.pageNum,"onUpdate:currentPage":a[1]||(a[1]=e=>r.pageNum=e),"page-size":r.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>r.pageSize=e),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:r.total,"page-sizes":[10,20,30,40,50,100],onSizeChange:E,onCurrentChange:F},null,8,["current-page","page-size","total"])])])),_:1},8,["title","onRegister"])}}}))));var D;export{I as _};
