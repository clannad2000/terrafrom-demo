var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,i)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[l]=i;import{d as o,Y as d,Z as n,n as f,A as u,a0 as c,ao as v,ap as m,r as p,j as y,o as h,c as g,e as b,b as x,h as k,u as w,aa as _,f as N,w as j,v as O,N as P,J as R,L as V,t as C,I as D,a1 as T,X as I,R as z,U as A,_ as H}from"./index-OtYEJMgP.js";import{g as J}from"./HelpCenter-dVii1H6s.js";import L from"./XgVideoPlayer-V_dGy2Ff.js";import"./icon_download-H10JPDv3.js";const U=[(e=>(z("data-v-09620ab9"),e=e(),A(),e))((()=>b("span",{class:"file-list-title"},"全部视频",-1)))],X={key:0,class:"loading-cove"},q=["data-id"],E={key:0,class:"loading-cove"},F={key:1,class:"no-selected-data"},S={key:0,class:"slt-file-box"},Y={key:1},Z={key:2},$=o((B=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(i)for(var l of i(a))s.call(a,l)&&r(e,l,a[l]);return e})({},{name:"HelpVideo"}),a(B,l({__name:"index",setup(e){const a=d(),{height:l}=n(a),i=d(),{height:t}=n(i),s=d(),{height:r}=n(s),o=d(),{height:z}=n(o),A=f((()=>({height:t.value-r.value-z.value+"px"}))),H=u(!1),$=c({fileName:""}),B=d([]),G=()=>{return e=this,a=null,l=function*(){H.value=!0,B.value=[];const{fileName:e}=$;yield J({fileName:e,function:"video"}).then((e=>{T!==e&&(B.value=e)})).finally((()=>{H.value=!1}))},new Promise(((i,t)=>{var s=e=>{try{o(l.next(e))}catch(a){t(a)}},r=e=>{try{o(l.throw(e))}catch(a){t(a)}},o=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,r);o((l=l.apply(e,a)).next())}));var e,a,l},K=u(""),M=c({fileName:"",documentType:"",url:""}),Q=u(!1),W=function(e){Q.value=e},ee=c({fileName:"",id:"",downloadDirect:!1,fileType:"",url:"",taskName:""}),ae=u(!1),le=u(""),ie=e=>{if("file-list-item"===e.target.className){ae.value=!1;const l=e.target.dataset.id,i=B.value.find((e=>e.id===l));i&&(K.value="vid_"+l,le.value="1",Object.assign(ee,{fileName:i.fileName,id:i.id,downloadDirect:!0,url:(a=i.id,a?`/js-zygk-admin/file/info/media/preview/${a}`:"")}),I((()=>{ae.value=!0,le.value=""})))}var a};return v((()=>{G()})),m((()=>{H.value=!1,ae.value=!1,K.value="",le.value="",$.fileName="",Object.assign(M,{fileName:"",documentType:"",url:""}),B.value=[]})),(e,t)=>{const r=p("el-button"),d=p("el-input"),n=p("el-form-item"),f=p("el-form"),u=y("loading");return h(),g("div",{ref_key:"compRef",ref:a,class:"w-full h-full grid grid-cols-[30%_1fr] gap-x-4"},[b("div",{ref_key:"leftContainerRef",ref:i,class:"left-container flex flex-col",style:O({height:w(l)+"px"})},[x(f,{ref_key:"searchFormRef",ref:s,inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:k((()=>[x(n,{class:"m-0"},{default:k((()=>[x(d,{modelValue:$.fileName,"onUpdate:modelValue":t[0]||(t[0]=e=>$.fileName=e),clearable:"",placeholder:"请输入视频名称",maxlength:"20"},{prepend:k((()=>[x(r,{icon:w(_)},null,8,["icon"])])),append:k((()=>[x(r,{onClick:G},{default:k((()=>[N("搜索")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},512),b("div",{ref_key:"leftTitleRef",ref:o,class:"h-[36px] flex flex-row items-center"},U,512),j((h(),g("div",{style:O(A.value),class:"flex flex-col overflow-y-auto file-list-box",onClick:ie},[H.value?(h(),g("div",X,"资源文件加载中，请稍等...")):P("",!0),(h(!0),g(R,null,V(B.value,(e=>(h(),g("div",{key:e.id,"data-id":e.id,class:C(["file-list-item",{"file-selected-class":K.value==="doc_"+e.id||K.value==="vid_"+e.id}])},D(e.fileName),11,q)))),128))],4)),[[u,H.value]])],4),b("div",{ref:"rightContainerRef",style:O({height:w(l)+"px"})},[ae.value?(h(),g(R,{key:0},[Q.value?(h(),g("div",E,"资源文件加载中，请稍等...")):P("",!0),x(L,{id:ee.id,ref:"videoPlayerRef",url:ee.url,"file-name":ee.fileName,"task-name":ee.taskName,"download-direct":ee.downloadDirect,"selected-file":K.value,onLoadingVideo:W},null,8,["id","url","file-name","task-name","download-direct","selected-file"])],64)):(h(),g("div",F,[le.value?"1"==le.value?(h(),g("div",Y,"资源文件下载中，请稍等...")):"2"==le.value?(h(),g("div",Z,"资源文件下载失败！")):P("",!0):(h(),g("div",S))]))],4)],512)}}}))));var B;const G=H($,[["__scopeId","data-v-09620ab9"]]);export{G as default};
