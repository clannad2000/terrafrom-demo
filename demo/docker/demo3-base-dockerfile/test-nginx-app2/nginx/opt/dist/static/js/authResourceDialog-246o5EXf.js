var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,r=(e,a,l)=>new Promise(((s,t)=>{var n=e=>{try{r(l.next(e))}catch(a){t(a)}},o=e=>{try{r(l.throw(e))}catch(a){t(a)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,o);r((l=l.apply(e,a)).next())}));import{d as c,a8 as u,A as d,at as i,bL as v,a1 as b,bM as p,r as f,j as h,o as y,g as m,h as _,e as g,b as k,f as w,w as x,c as j,u as O,aa as P,bw as R,a9 as C,n as I,bN as D,a6 as V,R as A,U as K,_ as U}from"./index-OtYEJMgP.js";const E=(e=>(A("data-v-4e59c6ca"),e=e(),K(),e))((()=>g("div",{class:"page-divider mb-4"},null,-1))),L={class:"min-h-48 max-h-[400px] px-2 overflow-auto"},M={class:"dialog-footer"},N=c((S=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&o(e,l,a[l]);if(s)for(var l of s(a))n.call(a,l)&&o(e,l,a[l]);return e})({},{name:"AuthResourceDialog"}),a(S,l({__name:"authResourceDialog",setup(e){let a="";const[l,{closeDialog:s}]=u((e=>{const{id:l}=e||{};a=l,l&&(q(),z())})),t={children:"children",label:"name",disabled:"disable"},n=d(),o=d(!1),c=d(!1),A=d(""),K=d(""),U=d([]),N=d([]),S=d([]);i(K,(e=>{n.value.filter(e)}));const T=function(e,{node:a}){return I((()=>{if(!a.label||!K.value)return k("span",{class:"el-tree-node__label"},[a.label]);try{if(a.label.includes(K.value)){const e=a.label.split(K.value),l=e.map(((a,l)=>k("span",null,[a,l===e.length-1?null:k("span",{style:"color:var(--el-color-primary);font-weight:bold"},[K.value])])));return k("span",{class:"el-tree-node__label"},[l])}return k("span",{class:"el-tree-node__label"},[a.label])}catch(e){return k("span",{class:"el-tree-node__label"},[a.label])}})).value},$=(e,a)=>!e||(null==a?void 0:a.name.includes(e)),q=()=>r(this,null,(function*(){const e=yield v({type:"all"});e&&b!==e&&(S.value=e)})),z=function(){return r(this,null,(function*(){const e=yield p({roleId:a});e&&b!==e&&(N.value=e)}))},B=function(){o.value=!1,c.value=!1,s(),a="",K.value="",A.value="",S.value=[],U.value=[],N.value=[],n.value.setCheckedKeys([],!1)},F=function(){c.value=!0;const e=n.value.getCheckedKeys(),l={roleId:a,resourceIds:e.join(",")};D(l).then((e=>{b!==e&&(V.success("资源授权成功！"),B())})).finally((()=>{c.value=!1}))};return(e,a)=>{const s=f("el-icon"),r=f("el-input"),u=f("el-button"),d=h("loading");return y(),m(O(C),{width:"720","show-close":!1,center:"","destroy-on-close":"",onClose:B,onRegister:O(l)},{footer:_((()=>[g("span",M,[k(u,{class:"basic-button",disabled:c.value,onClick:B},{default:_((()=>[w(" 返回 ")])),_:1},8,["disabled"]),k(u,{class:"basic-button",loading:c.value,onClick:F},{default:_((()=>[w(" 保存 ")])),_:1},8,["loading"])])])),default:_((()=>[x((y(),j("div",null,[k(r,{modelValue:K.value,"onUpdate:modelValue":a[0]||(a[0]=e=>K.value=e),class:"mb-4",maxlength:"20",clearable:"","show-word-limit":"",formatter:e=>e.replace(/^\s*|\s*$|\n/g,""),placeholder:"搜索资源"},{prefix:_((()=>[k(s,{class:"el-input__icon"},{default:_((()=>[k(O(P))])),_:1})])),_:1},8,["modelValue","formatter"]),E,g("div",L,[k(O(R),{ref_key:"resourceTreeRef",ref:n,class:"block","node-key":"id",data:S.value,"show-checkbox":"","check-strictly":"",props:t,"render-content":T,"filter-node-method":$,"default-expanded-keys":U.value,"default-checked-keys":N.value},null,8,["data","default-expanded-keys","default-checked-keys"])])])),[[d,o.value]])])),_:1},8,["onRegister"])}}}))));var S;const T=U(N,[["__scopeId","data-v-4e59c6ca"]]);export{T as default};
