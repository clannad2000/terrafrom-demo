var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r;import{a as d,e as n}from"./RoleManage-0i99zGbG.js";import{d as i,a8 as u,A as m,a0 as c,r as b,o as g,g as p,h as f,e as v,b as h,f as _,u as w,ab as y,a9 as k,a1 as x,a6 as F}from"./index-OtYEJMgP.js";const V={class:"dialog-footer"},O=i((j=((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&s(e,l,a[l]);if(r)for(var l of r(a))o.call(a,l)&&s(e,l,a[l]);return e})({},{name:"RoleEdit"}),a(j,l({__name:"editRoleDialog",emits:["register","confirm"],setup(e,{emit:a}){const l=a,[r,{closeDialog:t}]=u((e=>{const{type:a,data:l}=e;if(j=a,"edit"===a){const{id:e,name:a,role:r,remark:t,enabledFlag:o}=l||{};Object.assign(P,{id:e,name:a,role:r,remark:t,enabledFlag:o})}})),o=m(null),s=m(!1),i=m(""),O={name:[{required:!0,message:"请填写角色名称！",trigger:"blur"},{validator(e,a,l){/^[a-zA-Z0-9\u4e00-\u9fa5_-]+$/.test(a)||l(new Error("角色名称仅包含汉字,数字,大小写字母和特殊字符(-_)！")),l()},trigger:"blur"},{max:20,message:"角色名称长度不超过20位！",trigger:"blur"}],role:[{required:!0,message:"请填写角色标识！",trigger:"blur"},{validator(e,a,l){/^[a-zA-Z0-9_-]+$/.test(a)||l(new Error("角色标识仅包含数字,大小写字母和特殊字符(-_)！")),l()},trigger:"blur"},{max:20,message:"角色标识长度不超过20位！",trigger:"blur"}],remark:[{required:!1,max:64,message:"备注长度不超过64位！",trigger:"blur"}],enabledFlag:[{required:!0,message:"请选择是否启用！",trigger:"change"}]};let j="";const P=c({id:"",name:"",role:"",remark:"",enabledFlag:""}),$=function(){var e;s.value=!1,t(),Object.assign(P,{id:"",name:"",role:"",remark:"",enabledFlag:""}),j="",i.value="",null==(e=o.value)||e.resetFields()},R=function(){var e;null==(e=o.value)||e.validate((e=>{return a=this,r=null,t=function*(){if(e){s.value=!0;const{id:e,name:a,role:r,remark:t,enabledFlag:o}=P;"add"===j?d({name:a,role:r,remark:t,enabledFlag:o}).then((e=>{x!==e&&(F.success("添加角色成功！"),$(),l("confirm"))})).finally((()=>{s.value=!1})):"edit"===j?n({id:e,name:a,role:r,remark:t,enabledFlag:o}).then((e=>{x!==e&&(F.success("编辑角色成功！"),$(),l("confirm"))})).finally((()=>{s.value=!1})):s.value=!1}},new Promise(((e,l)=>{var o=e=>{try{d(t.next(e))}catch(a){l(a)}},s=e=>{try{d(t.throw(e))}catch(a){l(a)}},d=a=>a.done?e(a.value):Promise.resolve(a.value).then(o,s);d((t=t.apply(a,r)).next())}));var a,r,t}))};return(e,a)=>{const l=b("el-input"),t=b("el-form-item"),d=b("el-radio"),n=b("el-radio-group"),i=b("el-button");return g(),p(w(k),{"before-close":$,draggable:"",width:"720","show-close":!1,center:"","destroy-on-close":"","close-on-click-modal":!1,onRegister:w(r)},{footer:f((()=>[v("span",V,[h(i,{class:"basic-button",disabled:s.value,onClick:$},{default:f((()=>[_(" 取消 ")])),_:1},8,["disabled"]),h(i,{class:"basic-button",loading:s.value,onClick:R},{default:f((()=>[_(" 保存 ")])),_:1},8,["loading"])])])),default:f((()=>[h(w(y),{ref_key:"refRoleEditForm",ref:o,rules:O,model:P,"label-suffix":"：","label-width":"100px"},{default:f((()=>[h(t,{label:"角色名称",prop:"name"},{default:f((()=>[h(l,{modelValue:P.name,"onUpdate:modelValue":a[0]||(a[0]=e=>P.name=e),maxlength:"20",clearable:"",placeholder:"请填写角色名称","show-word-limit":"",disabled:s.value,formatter:e=>e.replace(/^\s*|\s*$/g,""),parser:e=>e.replace(/^\s*|\s*$/g,"")},null,8,["modelValue","disabled","formatter","parser"])])),_:1}),h(t,{label:"角色标识",prop:"role"},{default:f((()=>[h(l,{modelValue:P.role,"onUpdate:modelValue":a[1]||(a[1]=e=>P.role=e),maxlength:"20",clearable:"",placeholder:"请填写角色标识","show-word-limit":"",disabled:s.value,parser:e=>e.replace(/^\s*|\s*$/g,""),formatter:e=>e.replace(/^\s*|\s*$/g,"")},null,8,["modelValue","disabled","parser","formatter"])])),_:1}),h(t,{label:"备注"},{default:f((()=>[h(l,{modelValue:P.remark,"onUpdate:modelValue":a[2]||(a[2]=e=>P.remark=e),maxlength:"64",type:"textarea",rows:4,placeholder:"请填写备注","show-word-limit":"",clearable:"",disabled:s.value,parser:e=>e.replace(/^\s*|\s*$/g,""),formatter:e=>e.replace(/^\s*|\s*$/g,"")},null,8,["modelValue","disabled","parser","formatter"])])),_:1}),h(t,{label:"是否启用",prop:"enabledFlag"},{default:f((()=>[h(n,{modelValue:P.enabledFlag,"onUpdate:modelValue":a[3]||(a[3]=e=>P.enabledFlag=e),disabled:s.value,class:"ml-4"},{default:f((()=>[h(d,{label:"1"},{default:f((()=>[_("启用")])),_:1}),h(d,{label:"0"},{default:f((()=>[_("停用")])),_:1})])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"])])),_:1},8,["onRegister"])}}}))));var j;export{O as _};
