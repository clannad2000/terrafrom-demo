var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{d as r,z as s,A as p,F as c,r as d,j as u,o as f,g as h,h as w,w as y,c as b,e as g,b as m,f as v,I as _,N as k,M as x,u as C,S as j,a1 as O,aJ as I,a6 as P,$ as R,_ as D}from"./index-OtYEJMgP.js";import{_ as F,g as M,d as S}from"./editResourceDialog.vue_vue_type_script_setup_true_lang-yeYM6Ylm.js";import"./useThrottle-fY6V1GyW.js";const E={class:"w-full h-full table-container"},q={class:"h-full flex flex-col gap-y-4"},z={class:"w-full table-query"},A={class:"mb-4"},J={class:"leading-none"},L=r((N=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&n(e,a,l[a]);if(t)for(var a of t(l))i.call(l,a)&&n(e,a,l[a]);return e})({},{name:"ResourceManageIndex"}),l(N,a({__name:"index",setup(e){const[l,{showDialog:a,setDialogProps:t}]=s({title:"新增资源"}),o=p(!1),i=p([]),n=e=>R(e)?(e.forEach((e=>{R(e.children)&&e.children.length?e.children=n(e.children):delete e.children})),e):[],r=function(){o.value=!0,M({type:"all"}).then((e=>{O!==e&&(i.value=n(e))})).finally((()=>{o.value=!1}))},D=(e=null)=>{a(!0,{data:I(e),type:"add"}),t({title:"新增资源"})},L=()=>{r()};return c((()=>{r()})),(e,n)=>{const s=d("el-button"),p=d("el-table-column"),c=d("el-tag"),R=d("SvgIcon"),M=d("IconifyIconOffline"),N=d("el-popconfirm"),T=d("el-table"),U=d("el-main"),W=u("loading");return f(),h(U,null,{default:w((()=>[y((f(),b("div",E,[g("div",q,[g("div",z,[g("div",A,[m(s,{class:"basic-button",onClick:D},{default:w((()=>[v(" 新增资源 ")])),_:1})])]),m(T,{class:"w-full h-full","row-key":"identifier",data:i.value},{default:w((()=>[m(p,{prop:"name",label:"资源名称","min-width":"180","header-align":"center","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),m(p,{prop:"identifier",label:"资源标识","min-width":"180","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"},align:"center"}),m(p,{prop:"url",label:"URL","min-width":"180","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"},align:"center"}),m(p,{prop:"method",label:"请求方法",width:"100","show-overflow-tooltip":"",align:"center"}),m(p,{prop:"permission",label:"权限字符串","min-width":"180","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"},align:"center"}),m(p,{prop:"type",label:"资源类型",width:"100","show-overflow-tooltip":"",align:"center"},{default:w((({row:e})=>[v(_("0"===e.type?"菜单":"1"===e.type?"功能":"2"===e.type?"模块":"3"===e.type?"按钮":""),1)])),_:1}),m(p,{prop:"enabledFlag",label:"状态",width:"80",align:"center"},{default:w((({row:e})=>["1"==e.enabledFlag?(f(),h(c,{key:0,type:"success"},{default:w((()=>[v("启用")])),_:1})):(f(),h(c,{key:1,type:"danger"},{default:w((()=>[v("禁用")])),_:1}))])),_:1}),m(p,{prop:"icon",width:"60",label:"图标",align:"center"},{default:w((({row:e})=>{return[g("div",J,[(l=e.icon||"",(l||"").startsWith(j)?(f(),h(R,{key:0,name:e.icon,width:"20",height:"20"},null,8,["name"])):e.icon?(f(),h(M,{key:1,icon:e.icon,class:"inline-block",width:"20px",height:"20px"},null,8,["icon"])):k("",!0))])];var l})),_:1}),m(p,{fixed:"right",label:"操作",width:"180",align:"center"},{default:w((({row:e})=>[m(s,{type:"primary",link:"",onClick:l=>(a(!0,{data:I(e),type:"edit"}),void t({title:"编辑资源"}))},{default:w((()=>[v(" 编辑 ")])),_:2},1032,["onClick"]),"0"===e.type||"2"===e.type?(f(),h(s,{key:0,type:"primary",link:"",onClick:l=>D(e)},{default:w((()=>[v(" 添加 ")])),_:2},1032,["onClick"])):k("",!0),!e.children||e.children&&!e.children.length?(f(),h(N,{key:1,title:"确认删除?",onConfirm:l=>(e=>{const{id:l}=e;o.value=!0,S({resourceId:l}).then((e=>{O!==e&&(P.success("资源删除成功！"),r())})).finally((()=>{o.value=!1}))})(e)},{reference:w((()=>[m(s,{link:"",type:"danger",onClick:n[0]||(n[0]=x((()=>{}),["stop"]))},{default:w((()=>[v(" 删除")])),_:1})])),_:2},1032,["onConfirm"])):k("",!0)])),_:1})])),_:1},8,["data"])]),m(F,{onRegister:C(l),onConfirm:L},null,8,["onRegister"])])),[[W,o.value]])])),_:1})}}}))));var N;const T=D(L,[["__scopeId","data-v-7b71197c"]]);export{T as default};
