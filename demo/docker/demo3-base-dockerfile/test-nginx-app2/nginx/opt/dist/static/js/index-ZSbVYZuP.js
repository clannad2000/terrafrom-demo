import{d as e,A as a,a0 as t,Y as l,n as s,V as o,r as i,o as r,c as n,e as c,J as d,L as u,t as f,I as m,b as p,h as y,u as v,a2 as x,g as h,X as g,a5 as b,R as j,U as w,a1 as S,ay as _,_ as I}from"./index-OtYEJMgP.js";import{B as O}from"./index.esm.min-p6OgvXm7.js";import{Y as k}from"./StatisticalCenter-fzPo9Omj.js";import{e as A}from"./mitt-ei5ABelY.js";import{_ as C}from"./DurationSelector.vue_vue_type_style_index_0_lang-9IzWcL2C.js";import{u as D,L as T,i as V}from"./installCanvasRenderer-kp6nwiR2.js";import{i as L}from"./install-wLyK8H0F.js";import{i as Y}from"./install-q7ZRUXrs.js";import{i as B}from"./install-nwvgNUQF.js";import{i as R}from"./install-8-Qe0jiJ.js";import{i as z}from"./install-uIlpgulU.js";import"./weekday-rhQYfdMI.js";import"./Axis-xmqQ_bGV.js";import"./dataSample-MvCW8qRP.js";import"./createSeriesData-rVoIjXPv.js";import"./sectorHelper-nVwTOMBE.js";const P={class:"item"},F={class:"item-title"},M=(e=>(j("data-v-fa2fece6"),e=e(),w(),e))((()=>c("span",{class:"item-title-text"},"单位对比",-1))),U={class:"flex-1 flex flex-row justify-end"},X=["onClick"],q={class:"btn-text"},E={class:"item-content table-container"},H={class:"flex-1 flex flex-col w-full"},J=I(e({__name:"index",setup(e){D([L,Y,B,R,V,z]);const j=[{label:"月",value:"month"},{label:"周",value:"week"},{label:"日",value:"day"}],w=a("month"),I=t({dateType:"month",multiple:!1,cityOrgIds:[],dates:[]}),J=e=>{I.dates=e.selected||[],Z()};const N=a(!1),W=l([]),Z=b((()=>{return e=this,a=null,t=function*(){if(W.value=[],!I.cityOrgIds.length)return;N.value=!0,W.value=[];const e=w.value,{cityOrgIds:a,dates:t}=I;let l=[];"day"==e&&"day"!==I.dateType?t.forEach((e=>{l=l.concat(function(e,a){const t=[];let l=_(e);const s=_(a);for(;l.isBefore(s)||l.isSame(s,"day");)t.push(l.format("YYYY-MM-DD")),l=l.add(1,"day");return t}(e.beginDate,e.endDate).map((e=>({beginDate:e,endDate:e,dateCondition:e}))))})):l=t;const s={dateType:e,cityOrgIds:a.join(","),dates:l};k(s).then((e=>{S!==e&&(W.value=e||[])})).finally((()=>{N.value=!1}))},new Promise(((l,s)=>{var o=e=>{try{r(t.next(e))}catch(a){s(a)}},i=e=>{try{r(t.throw(e))}catch(a){s(a)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,i);r((t=t.apply(e,a)).next())}));var e,a,t}),1e3),G=s((()=>{let e={};return e="month"===w.value?{normal:{color:new T(0,0,0,1,[{offset:0,color:"#187fe4"},{offset:1,color:"#71a0fa"}])},barBorderRadius:[2,2,0,0]}:"week"===w.value?{normal:{color:new T(0,0,0,1,[{offset:0,color:"#00c1c1"},{offset:1,color:"#00ffff"}])},barBorderRadius:[2,2,0,0]}:{normal:{color:new T(0,0,0,1,[{offset:0,color:"#f59b26"},{offset:1,color:"#facd91"}])},barBorderRadius:[2,2,0,0]},{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"15%",right:"5%",left:"8%"},dataZoom:[{show:!0,realtime:!0,startValue:0,endValue:6,xAxisIndex:[0],height:18,bottom:18},{type:"inside",realtime:!0,startValue:0,endValue:6,xAxisIndex:[0]}],xAxis:[{type:"category",data:W.value.map((e=>e.XAxis)),axisLine:{lineStyle:{color:"#1b5059"}},axisLabel:{margin:10,color:"fff",textStyle:{fontSize:10}},axisTick:{show:!1}}],yAxis:[{type:"value",name:"单位(项)",minInterval:1,nameTextStyle:{color:"#fff",fontSize:14},axisLabel:{formatter:"{value}",color:"#fff",fontSize:12,align:"center"},axisTick:{show:!1},axisLine:{show:!1},splitLine:{lineStyle:{color:"#1b5059",type:"solid"}}}],series:[{type:"bar",data:W.value.map((e=>e.YAxis)),barWidth:"24px",itemStyle:e}]}}));return o((()=>{A.on("StatisticalCenterPlanStatisticsReload",(()=>{(()=>{const e=x().cityOrg.map((e=>e.id));I.cityOrgIds=e})(),Z()}))})),(e,a)=>{const t=i("el-option"),l=i("el-select"),s=i("el-form-item"),o=i("el-form");return r(),n("div",P,[c("div",F,[M,c("div",U,[(r(),n(d,null,u(j,(e=>c("div",{key:e.value,class:f(["tab-btn cursor-pointer",{active:w.value===e.value}]),onClick:a=>{return t=e.value,w.value=t,void g((()=>{I.dateType=t}));var t}},[c("span",q,m(e.label),1)],10,X))),64))])]),c("div",E,[p(o,{inline:!0,class:"w-full table-query"},{default:y((()=>[p(s,{class:"m-0"},{default:y((()=>[p(l,{modelValue:I.cityOrgIds,"onUpdate:modelValue":a[0]||(a[0]=e=>I.cityOrgIds=e),placeholder:"请选择市级公司",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",onFocus:v(x)().loadCityOrg,onBlur:v(Z)},{default:y((()=>[(r(!0),n(d,null,u(v(x)().cityOrg,(e=>(r(),h(t,{key:e.id,value:e.id,label:e.shortName||e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onFocus","onBlur"])])),_:1}),p(s,{class:"m-0"},{default:y((()=>[p(C,{"date-type":I.dateType,multiple:I.multiple,onOnSelectionChange:J},null,8,["date-type","multiple"])])),_:1})])),_:1}),c("div",H,[p(v(O),{ref:"vchart",class:"w-full h-full",option:G.value,autoresize:""},null,8,["option"])])])])}}}),[["__scopeId","data-v-fa2fece6"]]);export{J as default};
