var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{i}from"./StatisticalCenter-fzPo9Omj.js";import{u as n}from"./useAutoScroll-cuZfK63C.js";import{d as p,a0 as c,Y as u,n as d,A as f,V as w,r as m,o as b,c as v,b as h,h as y,v as k,u as j,f as g,I as x,a5 as C,a1 as O,X as R,_ as T}from"./index-OtYEJMgP.js";import{e as P}from"./mitt-ei5ABelY.js";const _={class:"w-full h-full flex flex-col"},D=p((I=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(o)for(var t of o(a))s.call(a,t)&&l(e,t,a[t]);return e})({},{name:"VideoBackByMajorTypeRank"}),a(I,t({__name:"VideoBackByMajorTypeRank",props:{orgId:{default:""},majorTypes:{default:()=>[]},workRiskLevels:{default:()=>[]},time:{default:()=>[]}},emits:["onTrendDialog"],setup(e,{emit:a}){const t=a,o=e,r=c({orgId:"",majorType:"",workRiskLevel:"",beginDate:"",endDate:""}),s=u(),l=d((()=>s.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:p,stop:T}=n({scrollRef:l}),D=f(!1),I=u([]),M=C((()=>{return e=this,a=null,t=function*(){T(),D.value=!0,I.value=[],i(r).then((e=>{O!==e&&(I.value=e,R((()=>{p()})))})).finally((()=>{D.value=!1}))},new Promise(((o,r)=>{var s=e=>{try{i(t.next(e))}catch(a){r(a)}},l=e=>{try{i(t.throw(e))}catch(a){r(a)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,l);i((t=t.apply(e,a)).next())}));var e,a,t}),1e3),B=e=>{t("onTrendDialog",{type:"majorTypeVideoBack",data:e})};return w((()=>{P.on("StatisticalCenterAppliedStatisticsReload",(()=>{const{orgId:e,workRiskLevels:a,majorTypes:t,time:s=[]}=o,[l="",i=""]=s;Object.assign(r,{orgId:e,workRiskLevel:a.join(","),majorType:t.join(","),beginDate:l,endDate:i}),M()}))})),(e,a)=>{const t=m("el-table-column"),o=m("el-table"),r=m("el-auto-resizer");return b(),v("div",_,[h(r,null,{default:y((({height:e,width:a})=>[h(o,{ref_key:"tableRef",ref:s,class:"cursor-pointer",height:e,data:I.value,"show-overflow-tooltip":"",style:k({width:a+"px"}),onMouseover:j(T),onMouseleave:j(p),onRowClick:B},{default:y((()=>[h(t,{type:"index",label:"排名",width:"80",align:"center"}),h(t,{prop:"majorTypeName",align:"center",label:"专业","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"allCount",align:"center",label:"已记录作业数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"backCount",align:"center",label:"已回传作业数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),h(t,{prop:"backPercent",align:"center",label:"回传率百分比","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:y((({row:e})=>[g(x(`${e.backPercent}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])}}}))));var I;const M=T(D,[["__scopeId","data-v-4078528e"]]);export{M as default};
