import{n as t,V as e,E as a,bN as n,aA as o,bO as r,bP as i,bQ as s,b as l,bi as c,bh as u,aY as h}from"./installCanvasRenderer-kp6nwiR2.js";var f=function(){function t(){}return t.prototype.getNeedCrossZero=function(){return!this.option.scale},t.prototype.getCoordSysModel=function(){},t}(),d=function(){function a(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return a.prototype.getAxis=function(t){return this._axes[t]},a.prototype.getAxes=function(){return t(this._dimList,(function(t){return this._axes[t]}),this)},a.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),e(this.getAxes(),(function(e){return e.scale.type===t}))},a.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},a}(),p=a();function v(e){return"category"===e.type?function(t){var e=t.getLabelModel(),a=x(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}(e):function(e){var a=e.scale.getTicks(),n=r(e);return{labels:t(a,(function(t,a){return{level:t.level,formattedLabel:n(t,a),rawLabel:e.scale.getLabel(t),tickValue:t.value}}))}}(e)}function g(e,a){return"category"===e.type?function(e,a){var r,i,s=b(e,"ticks"),l=n(a),c=y(s,l);if(c)return c;a.get("show")&&!e.scale.isBlank()||(r=[]);if(o(l))r=m(e,l,!0);else if("auto"===l){var u=x(e,e.getLabelModel());i=u.labelCategoryInterval,r=t(u.labels,(function(t){return t.tickValue}))}else r=k(e,i=l,!0);return M(s,l,{ticks:r,tickCategoryInterval:i})}(e,a):{ticks:t(e.scale.getTicks(),(function(t){return t.value}))}}function x(t,e){var a,r,i=b(t,"labels"),s=n(e),l=y(i,s);return l||(o(s)?a=m(t,s):(r="auto"===s?function(t){var e=p(t).autoInterval;return null!=e?e:p(t).autoInterval=t.calculateCategoryInterval()}(t):s,a=k(t,r)),M(i,s,{labels:a,labelCategoryInterval:r}))}function b(t,e){return p(t)[e]||(p(t)[e]=[])}function y(t,e){for(var a=0;a<t.length;a++)if(t[a].key===e)return t[a].value}function M(t,e,a){return t.push({key:e,value:a}),a}function k(t,e,a){var n=r(t),o=t.scale,i=o.getExtent(),l=t.getLabelModel(),c=[],u=Math.max((e||0)+1,1),h=i[0],f=o.count();0!==h&&u>1&&f/u>2&&(h=Math.round(Math.ceil(h/u)*u));var d=s(t),p=l.get("showMinLabel")||d,v=l.get("showMaxLabel")||d;p&&h!==i[0]&&x(i[0]);for(var g=h;g<=i[1];g+=u)x(g);function x(t){var e={value:t};c.push(a?t:{formattedLabel:n(e),rawLabel:o.getLabel(e),tickValue:t})}return v&&g-u!==i[1]&&x(i[1]),c}function m(t,e,a){var n=t.scale,o=r(t),i=[];return l(n.getTicks(),(function(t){var r=n.getLabel(t),s=t.value;e(t.value,r)&&i.push(a?s:{formattedLabel:o(t),rawLabel:r,tickValue:s})})),i}var L=[0,1];function C(t,e){var a=(t[1]-t[0])/e/2;t[0]+=a,t[1]-=a}const T=function(){function e(t,e,a){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=a||[0,0]}return e.prototype.contain=function(t){var e=this._extent,a=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t>=a&&t<=n},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return c(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,e){var a=this._extent;a[0]=t,a[1]=e},e.prototype.dataToCoord=function(t,e){var a=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&"ordinal"===n.type&&C(a=a.slice(),n.count()),u(t,L,a,e)},e.prototype.coordToData=function(t,e){var a=this._extent,n=this.scale;this.onBand&&"ordinal"===n.type&&C(a=a.slice(),n.count());var o=u(t,a,L,e);return this.scale.scale(o)},e.prototype.pointToData=function(t,e){},e.prototype.getTicksCoords=function(e){var a=(e=e||{}).tickModel||this.getTickModel(),n=g(this,a).ticks,o=t(n,(function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}}),this);return function(t,e,a,n){var o=e.length;if(!t.onBand||a||!o)return;var r,i,s=t.getExtent();if(1===o)e[0].coord=s[0],r=e[1]={coord:s[1]};else{var c=e[o-1].tickValue-e[0].tickValue,u=(e[o-1].coord-e[0].coord)/c;l(e,(function(t){t.coord-=u/2})),i=1+t.scale.getExtent()[1]-e[o-1].tickValue,r={coord:e[o-1].coord+u*i},e.push(r)}var f=s[0]>s[1];d(e[0].coord,s[0])&&(n?e[0].coord=s[0]:e.shift());n&&d(s[0],e[0].coord)&&e.unshift({coord:s[0]});d(s[1],r.coord)&&(n?r.coord=s[1]:e.pop());n&&d(r.coord,s[1])&&e.push({coord:s[1]});function d(t,e){return t=h(t),e=h(e),f?t>e:t<e}}(this,o,a.get("alignWithLabel"),e.clamp),o},e.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");e>0&&e<100||(e=5);var a=this.scale.getMinorTicks(e);return t(a,(function(e){return t(e,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this)}),this)},e.prototype.getViewLabels=function(){return v(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),a=e[1]-e[0]+(this.onBand?1:0);0===a&&(a=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/a},e.prototype.calculateCategoryInterval=function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),a=r(t),n=(e.axisRotate-e.labelRotate)/180*Math.PI,o=t.scale,s=o.getExtent(),l=o.count();if(s[1]-s[0]<1)return 0;var c=1;l>40&&(c=Math.max(1,Math.floor(l/40)));for(var u=s[0],h=t.dataToCoord(u+1)-t.dataToCoord(u),f=Math.abs(h*Math.cos(n)),d=Math.abs(h*Math.sin(n)),v=0,g=0;u<=s[1];u+=c){var x,b,y=i(a({value:u}),e.font,"center","top");x=1.3*y.width,b=1.3*y.height,v=Math.max(v,x,7),g=Math.max(g,b,7)}var M=v/f,k=g/d;isNaN(M)&&(M=Infinity),isNaN(k)&&(k=Infinity);var m=Math.max(0,Math.floor(Math.min(M,k))),L=p(t.model),C=t.getExtent(),T=L.lastAutoInterval,_=L.lastTickCount;return null!=T&&null!=_&&Math.abs(T-m)<=1&&Math.abs(_-l)<=1&&T>m&&L.axisExtent0===C[0]&&L.axisExtent1===C[1]?m=T:(L.lastTickCount=l,L.lastAutoInterval=m,L.axisExtent0=C[0],L.axisExtent1=C[1]),m}(this)},e}();export{f as A,d as C,T as a};
