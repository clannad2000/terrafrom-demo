var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,n=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&o(e,t,a[t]);if(s)for(var t of s(a))r.call(a,t)&&o(e,t,a[t]);return e},i=(e,s)=>a(e,t(s));import{c as p}from"./index-5mLQMBux.js";import{m as c,n as u}from"./StatisticalCenter-fzPo9Omj.js";import{d as m}from"./constants-uiyZ18jc.js";import{u as d}from"./useAutoScroll-cuZfK63C.js";import{d as f,a0 as v,n as b,Y as h,A as g,V as w,r as j,o as x,c as y,e as C,b as R,h as k,u as _,J as O,L as D,I as P,v as S,f as U,a5 as E,R as M,U as A,a1 as Y,X as V,_ as I}from"./index-OtYEJMgP.js";import{e as L}from"./mitt-ei5ABelY.js";import q from"./gaugeChart-QvmPNz1f.js";import"./index-8BZoKa2l.js";import"./installCanvasRenderer-kp6nwiR2.js";import"./install-vdGRsLLb.js";import"./createSeriesData-rVoIjXPv.js";import"./dataSample-MvCW8qRP.js";import"./install-8-Qe0jiJ.js";import"./sectorHelper-nVwTOMBE.js";import"./install-50C6z8uZ.js";import"./install-wLyK8H0F.js";import"./Axis-xmqQ_bGV.js";import"./install-uIlpgulU.js";import"./installLabelLayout-tlP3-N5v.js";import"./install-XLlD8WoL.js";import"./install-XFuIEcts.js";import"./install-nwvgNUQF.js";import"./install-q7ZRUXrs.js";import"./install-FXlg7-M8.js";import"./terminal-usage-dlWtYe9a.js";const z={class:"item"},N=(e=>(M("data-v-1dafb359"),e=e(),A(),e))((()=>C("div",{class:"item-title"},[C("span",{class:"item-title-text"},"设备使用情况")],-1))),F={class:"item-content table-container"},H={class:"flex-1 flex flex-row w-full"},J={class:"terminal-use-content"},W={class:"left"},X={class:"name-box"},$={class:"name"},B={class:"num-box"},G={class:"num"},K={class:"unit"},Q={class:"right"},T={class:"percentage-box"},Z={class:"flex-1 flex flex-row w-full"},ee=I(f(i(n({},{name:"DeviceUsage"}),{__name:"index",setup(e){const a=v({time:m.range.default}),t=v({allRecorderCount:"0",notUsageRecorderCount:"0",usageRecorderCount:"0"}),s=b((()=>({value:p("usageRecorderCount / allRecorderCount * 100 | <=2 ~5",i(n({},t),{_error:0})),valueColor:"#5CFAA7",unit:"%",name:"终端使用率"}))),l=[{key:"allRecorderCount",name:"总台数",unit:"台"},{key:"usageRecorderCount",name:"使用台数",unit:"台"},{key:"notUsageRecorderCount",name:"未使用台数",unit:"台"}],r=h([]),o=h(),f=b((()=>o.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:M,stop:A}=d({scrollRef:f}),I=g(!1),ee=E((()=>{return e=this,s=null,l=function*(){A(),I.value=!0,Object.keys(t).forEach((e=>{t[e]="0"})),r.value=[];const{time:e=[]}=a,[s="",l=""]=e;yield c({beginDate:s,endDate:l}).then((e=>{Y!==e&&Object.keys(t).forEach((a=>{t[a]=e[a]||"0"}))})),yield u({beginDate:s,endDate:l,pageNum:1,pageSize:9999}).then((e=>{Y!==e&&(r.value=e.rows||[])})),V((()=>{M()})),I.value=!1},new Promise(((a,t)=>{var r=e=>{try{n(l.next(e))}catch(a){t(a)}},o=e=>{try{n(l.throw(e))}catch(a){t(a)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,o);n((l=l.apply(e,s)).next())}));var e,s,l}),1e3);return w((()=>{L.on("StatisticalCenterDeviceStatisticsReload",(()=>{ee()}))})),(e,c)=>{const u=j("el-date-picker"),m=j("el-form-item"),d=j("el-form"),f=j("el-table-column"),v=j("el-table"),b=j("el-auto-resizer");return x(),y("div",z,[N,C("div",F,[R(d,{inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:k((()=>[R(m,{class:"m-0"},{default:k((()=>[R(u,{modelValue:a.time,"onUpdate:modelValue":c[0]||(c[0]=e=>a.time=e),"value-format":"YYYY-MM-DD",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",editable:!1,clearable:!1,onChange:_(ee)},null,8,["modelValue","onChange"])])),_:1})])),_:1}),C("div",H,[C("div",J,[C("div",W,[(x(),y(O,null,D(l,(e=>C("div",{key:e.key,class:"terminal-use-item"},[C("div",X,[C("span",$,P(e.name),1)]),C("div",B,[C("span",G,P(t[e.key]),1),C("span",K,P(e.unit),1)])]))),64))]),C("div",Q,[C("div",T,[R(q,{ref:"gaugeChart",data:s.value},null,8,["data"])])])])]),C("div",Z,[R(b,null,{default:k((({height:e,width:a})=>[R(v,{ref_key:"tableRef",ref:o,class:"cursor-pointer",height:e,data:r.value,"show-overflow-tooltip":"",style:S({width:a+"px"}),onMouseover:_(A),onMouseleave:_(M)},{default:k((()=>[R(f,{prop:"orgName",align:"center",label:"单位","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),R(f,{prop:"allRecorderCount",align:"center",label:"总台数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),R(f,{prop:"usageRecorderCount",align:"center",label:"使用台数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),R(f,{prop:"notUsageRecorderCount",align:"center",label:"未使用台数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),R(f,{prop:"usagePercent",align:"center",label:"使用率","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:k((({row:e})=>[U(P(`${_(p)("usageRecorderCount / allRecorderCount * 100 | <=2 ~5",i(n({},e),{_error:0}))}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])])])}}})),[["__scopeId","data-v-1dafb359"]]);export{ee as default};
