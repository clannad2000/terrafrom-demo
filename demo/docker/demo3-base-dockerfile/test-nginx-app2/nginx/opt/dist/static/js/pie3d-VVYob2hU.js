import"./linesGL-UdMq74_O.js";import"./index-8BZoKa2l.js";import{_ as e,o as t,c as i,R as a,U as s,e as o}from"./index-OtYEJMgP.js";import{a as n}from"./installCanvasRenderer-kp6nwiR2.js";import"./Axis-xmqQ_bGV.js";import"./installLabelLayout-tlP3-N5v.js";import"./install-50C6z8uZ.js";import"./sectorHelper-nVwTOMBE.js";import"./createSeriesData-rVoIjXPv.js";import"./install-FXlg7-M8.js";import"./install-vdGRsLLb.js";import"./dataSample-MvCW8qRP.js";import"./install-8-Qe0jiJ.js";import"./install-wLyK8H0F.js";import"./install-uIlpgulU.js";import"./install-XLlD8WoL.js";import"./install-XFuIEcts.js";import"./install-nwvgNUQF.js";import"./install-q7ZRUXrs.js";const r={data:()=>({optionData:[{name:"转向架",value:34,itemStyle:{color:"#91D9FE",opacity:.65}},{name:"车体拆解",value:33,itemStyle:{color:"#54E1AE",opacity:.65}},{name:"车体拆解",value:33,itemStyle:{color:"#496FF4",opacity:.65}}]}),watch:{chartData:{deep:!0,handler(e){this.setOption(e)}}},mounted(){this.initChart()},beforeUnmount(){},methods:{initChart(){const e=n(document.getElementById("myChart4"));this.option=this.getPie3D(this.optionData,.85),e.setOption(this.option),this.option.series.push({label:{show:!0,position:"outside",color:"auto",formatter:function(e){return`{a| ${e.percent}} {b|%}\n {c|${e.data.name}}`},rich:{a:{color:"#fff",fontSize:14},b:{color:"#fff",fontSize:14},c:{fontSize:12,padding:5,color:"#D8EFFF"}}},labelLine:{show:!0,length:"10%",length2:"10%",lineStyle:{width:1}},type:"pie",startAngle:-20,clockwise:!1,radius:["35%","35%"],center:["50%","42%"],data:this.optionData,itemStyle:{opacity:0},hoverAnimation:!1}),e.setOption(this.option),this.bindListen(e)},getPie3D(e,t){const i=this,a=[];let s=0,o=0,n=0,r=[],p=[];const l=1-t;e.sort(((e,t)=>t.value-e.value));for(let m=0;m<e.length;m++){s+=e[m].value;const t={name:void 0===e[m].name?`series${m}`:e[m].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:e[m],pieStatus:{selected:!1,hovered:!1,k:l}};if(void 0!==e[m].itemStyle){const i={};void 0!==e[m].itemStyle.color&&(i.color=e[m].itemStyle.color),void 0!==e[m].itemStyle.opacity&&(i.opacity=e[m].itemStyle.opacity),t.itemStyle=i}a.push(t)}r=[],p=[];for(let m=0;m<a.length;m++){n=o+a[m].pieData.value,a[m].pieData.startRatio=o/s,a[m].pieData.endRatio=n/s,a[m].parametricEquation=this.getParametricEquation(a[m].pieData.startRatio,a[m].pieData.endRatio,!1,!1,l,a[m].pieData.value),o=n;const e=i.fomatFloat(a[m].pieData.value/s,4);r.push({name:a[m].name,value:e}),p.push({name:a[m].name,value:e})}const c={legend:{show:!1,data:[],itemHeight:10,itemWidth:10,top:130,itemGap:8,textStyle:{color:"#A1E2FF"},show:!0,formatter:function(t){let i;for(let a=0,s=e.length;a<s;a++)e[a].name==t&&(i=e[a].value);return`${t}: ${i} %`}},tooltip:{show:!1,formatter:e=>{if("mouseoutSeries"!==e.seriesName&&"pie2d"!==e.seriesName){const t=(100*(c.series[e.seriesIndex].pieData.endRatio-c.series[e.seriesIndex].pieData.startRatio)).toFixed(0);return`${e.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${e.color};"></span>${t}%`}}},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:this.getHeight3D(a,12),left:0,top:-10,viewControl:{alpha:30,distance:180,rotateSensitivity:0,zoomSensitivity:0,panSensitivity:0,autoRotate:!1}},series:a};return c},getHeight3D:(e,t)=>(e.sort(((e,t)=>t.pieData.value-e.pieData.value)),25*t/e[0].pieData.value),getParametricEquation(e,t,i,a,s,o){const n=(e+t)/2,r=e*Math.PI*2,p=t*Math.PI*2,l=n*Math.PI*2;0===e&&1===t&&(i=!1),s=void 0!==s?s:1/3;const c=i?.1*Math.cos(l):0,m=i?.1*Math.sin(l):0,u=a?1.05:1;return{u:{min:-Math.PI,max:3*Math.PI,step:Math.PI/32},v:{min:0,max:2*Math.PI,step:Math.PI/20},x:function(e,t){return e<r?c+Math.cos(r)*(1+Math.cos(t)*s)*u:e>p?c+Math.cos(p)*(1+Math.cos(t)*s)*u:c+Math.cos(e)*(1+Math.cos(t)*s)*u},y:function(e,t){return e<r?m+Math.sin(r)*(1+Math.cos(t)*s)*u:e>p?m+Math.sin(p)*(1+Math.cos(t)*s)*u:m+Math.sin(e)*(1+Math.cos(t)*s)*u},z:function(e,t){return e<.5*-Math.PI?Math.sin(e):e>2.5*Math.PI?Math.sin(e)*o*.1:Math.sin(t)>0?1*o*.1:-1}}},fomatFloat(e,t){let i=parseFloat(e);if(isNaN(i))return!1;i=Math.round(e*Math.pow(10,t))/Math.pow(10,t);let a=i.toString(),s=a.indexOf(".");for(s<0&&(s=a.length,a+=".");a.length<=s+t;)a+="0";return a},bindListen(e){const t=this;let i="",a="";e.on("click",(function(a){const s=!t.option.series[a.seriesIndex].pieStatus.selected,o=t.option.series[a.seriesIndex].pieStatus.hovered,n=t.option.series[a.seriesIndex].pieStatus.k,r=t.option.series[a.seriesIndex].pieData.startRatio,p=t.option.series[a.seriesIndex].pieData.endRatio;""!==i&&i!==a.seriesIndex&&(t.option.series[i].parametricEquation=t.getParametricEquation(t.option.series[i].pieData.startRatio,t.option.series[i].pieData.endRatio,!1,!1,n,t.option.series[i].pieData.value),t.option.series[i].pieStatus.selected=!1),t.option.series[a.seriesIndex].parametricEquation=t.getParametricEquation(r,p,s,o,n,t.option.series[a.seriesIndex].pieData.value),t.option.series[a.seriesIndex].pieStatus.selected=s,s&&(i=a.seriesIndex),e.setOption(t.option)})),e.on("mouseover",(function(i){let s,o,n,r,p;a!==i.seriesIndex&&(""!==a&&(s=t.option.series[a].pieStatus.selected,o=!1,n=t.option.series[a].pieData.startRatio,r=t.option.series[a].pieData.endRatio,p=t.option.series[a].pieStatus.k,t.option.series[a].parametricEquation=t.getParametricEquation(n,r,s,o,p,t.option.series[a].pieData.value),t.option.series[a].pieStatus.hovered=o,a=""),"mouseoutSeries"!==i.seriesName&&"pie2d"!==i.seriesName&&(s=t.option.series[i.seriesIndex].pieStatus.selected,o=!0,n=t.option.series[i.seriesIndex].pieData.startRatio,r=t.option.series[i.seriesIndex].pieData.endRatio,p=t.option.series[i.seriesIndex].pieStatus.k,t.option.series[i.seriesIndex].parametricEquation=t.getParametricEquation(n,r,s,o,p,t.option.series[i.seriesIndex].pieData.value+5),t.option.series[i.seriesIndex].pieStatus.hovered=o,a=i.seriesIndex),e.setOption(t.option))})),e.on("globalout",(function(){let i,s,o,n,r;""!==a&&(i=t.option.series[a].pieStatus.selected,s=!1,r=t.option.series[a].pieStatus.k,o=t.option.series[a].pieData.startRatio,n=t.option.series[a].pieData.endRatio,t.option.series[a].parametricEquation=t.getParametricEquation(o,n,i,s,r,t.option.series[a].pieData.value),t.option.series[a].pieStatus.hovered=s,a=""),e.setOption(t.option)}))}}},p={class:"container"},l=[(e=>(a("data-v-acdc5665"),e=e(),s(),e))((()=>o("div",{id:"myChart4",class:"echarts"},null,-1)))];const c=e(r,[["render",function(e,a,s,o,n,r){return t(),i("div",p,l)}],["__scopeId","data-v-acdc5665"]]);export{c as default};
