var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{B as n}from"./index.esm.min-p6OgvXm7.js";import{l as i}from"./StatisticalCenter-fzPo9Omj.js";import{d as p}from"./constants-uiyZ18jc.js";import{u as c}from"./useAutoScroll-cuZfK63C.js";import{d as f,Y as u,n as m,a0 as d,A as v,V as h,r as b,o as g,c as w,e as x,b as y,h as j,u as C,v as O,f as P,I as S,a5 as _,R as k,U as z,a1 as D,X as U,_ as $}from"./index-OtYEJMgP.js";import{e as E}from"./mitt-ei5ABelY.js";import{u as M,i as R}from"./installCanvasRenderer-kp6nwiR2.js";import{i as V}from"./install-wLyK8H0F.js";import{i as A}from"./install-q7ZRUXrs.js";import{i as Y}from"./install-nwvgNUQF.js";import{i as F}from"./install-XFuIEcts.js";import{i as I}from"./install-50C6z8uZ.js";import"./Axis-xmqQ_bGV.js";import"./sectorHelper-nVwTOMBE.js";const W={class:"item"},H=(e=>(k("data-v-0bc57928"),e=e(),z(),e))((()=>x("div",{class:"item-title"},[x("span",{class:"item-title-text"},"一体机使用情况")],-1))),L={class:"item-content table-container gap-y-2"},q={class:"w-full flex-1 flex flex-row items-center"},N={class:"w-1/3 h-full"},X={class:"w-2/3 h-full"},B=f((G=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&s(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&s(e,a,t[a]);return e})({},{name:"AioUsage"}),t(G,a({__name:"index",setup(e){M([V,A,Y,F,I,R]);const t=u(),a=m((()=>t.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:l,stop:o}=c({scrollRef:a}),r=d({time:p.range.default}),s=v(!1),f=d({text:0,data:[{name:"已使用",value:0,per:0},{name:"未使用",value:0,per:0}]}),k=m((()=>({title:{text:f.text,textStyle:{color:"#ffffff",fontSize:20,height:48},subtext:"总数",subtextStyle:{color:"#ffffff",fontSize:16},left:"center",top:"32%"},color:["#FEDC5E","#4AF1FC"],tooltip:{trigger:"item",formatter(e){const{marker:t,name:a="",value:l=0}=null!=e?e:{};return`${t} ${a}: ${l}`}},legend:{orient:"vertical",left:"center",bottom:"25%",data:["已使用","未使用"],textStyle:{color:"#fff",fontSize:14,rich:{name:{color:"#fff"},value:{padding:[0,8,0,8]},p:{color:"#fff"}}},itemWidth:8,itemHeight:8,formatter:function(e){const t=f.data;let a,l;for(let o=0;o<t.length;o++)t[o].name==e&&(a=t[o].value,l=t[o].per);return`{name| ${e}: }{value|${a},}{p|${l}%}`}},series:[{name:"总数",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",rich:{percent:{fontSize:10,color:"inherit"}}},center:["50%","38%"],emphasis:{label:{show:!1,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:f.data}]}))),z=u([]),$=_((()=>{return e=this,t=null,a=function*(){o(),s.value=!0,Object.assign(f,{text:0,data:[{name:"已使用",value:0,per:0},{name:"未使用",value:0,per:0}]}),z.value=[];const{time:e=[]}=r,[t="",a=""]=e;i({beginDate:t,endDate:a}).then((e=>{if(D!==e){const{wholeVo:t={allCount:0,usageCount:0,usagePercent:0,notUsageCount:0,notUsagePercent:0},cityOrgVos:a=[]}=e;f.text=t.allCount,f.data=[{name:"已使用",value:t.usageCount,per:t.usagePercent},{name:"未使用",value:t.notUsageCount,per:t.notUsagePercent}],z.value=a,U((()=>{l()}))}})).finally((()=>{s.value=!1}))},new Promise(((l,o)=>{var r=e=>{try{n(a.next(e))}catch(t){o(t)}},s=e=>{try{n(a.throw(e))}catch(t){o(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,s);n((a=a.apply(e,t)).next())}));var e,t,a}),1e3);return h((()=>{E.on("StatisticalCenterDeviceStatisticsReload",(()=>{$()}))})),(e,a)=>{const s=b("el-date-picker"),i=b("el-form-item"),p=b("el-form"),c=b("el-table-column"),f=b("el-table"),u=b("el-auto-resizer");return g(),w("div",W,[H,x("div",L,[y(p,{inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:j((()=>[y(i,{class:"m-0"},{default:j((()=>[y(s,{modelValue:r.time,"onUpdate:modelValue":a[0]||(a[0]=e=>r.time=e),"value-format":"YYYY-MM-DD",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",editable:!1,clearable:!1,onChange:C($)},null,8,["modelValue","onChange"])])),_:1})])),_:1}),x("div",q,[x("div",N,[y(C(n),{ref:"chartRef",option:k.value,autoresize:""},null,8,["option"])]),x("div",X,[y(u,null,{default:j((({height:e,width:a})=>[y(f,{ref_key:"tableRef",ref:t,class:"cursor-pointer",height:e,data:z.value,"show-overflow-tooltip":"",style:O({width:a+"px"}),onMouseover:C(o),onMouseleave:C(l)},{default:j((()=>[y(c,{prop:"cityOrgName",align:"center",label:"市级公司","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),y(c,{prop:"allCount",align:"center",label:"总数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),y(c,{prop:"usageCount",align:"center",label:"已使用","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),y(c,{prop:"usagePercent",align:"center",label:"使用率","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:j((({row:e})=>[P(S(`${e.usagePercent}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])])])])}}}))));var G;const J=$(B,[["__scopeId","data-v-0bc57928"]]);export{J as default};
