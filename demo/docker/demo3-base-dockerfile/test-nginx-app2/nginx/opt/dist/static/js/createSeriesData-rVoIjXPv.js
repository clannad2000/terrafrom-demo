import{aL as e,b as n,b5 as t,bD as s,bE as r,aA as i,A as a,bF as o,bG as l,bH as d,bI as c,g as u,bJ as g,bK as m,n as f,bL as x}from"./installCanvasRenderer-kp6nwiR2.js";var y=function(){return function(e){this.coordSysDims=[],this.axisMap=t(),this.categoryAxisMap=t(),this.coordSysName=e}}();var D={cartesian2d:function(n,t,s,r){var i=n.getReferringComponents("xAxis",e).models[0],a=n.getReferringComponents("yAxis",e).models[0];t.coordSysDims=["x","y"],s.set("x",i),s.set("y",a),p(i)&&(r.set("x",i),t.firstCategoryDimIndex=0),p(a)&&(r.set("y",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,s,r){var i=n.getReferringComponents("singleAxis",e).models[0];t.coordSysDims=["single"],s.set("single",i),p(i)&&(r.set("single",i),t.firstCategoryDimIndex=0)},polar:function(n,t,s,r){var i=n.getReferringComponents("polar",e).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],s.set("radius",a),s.set("angle",o),p(a)&&(r.set("radius",a),t.firstCategoryDimIndex=0),p(o)&&(r.set("angle",o),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,n,t,s){n.coordSysDims=["lng","lat"]},parallel:function(e,t,s,r){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();n(a.parallelAxisIndex,(function(e,n){var a=i.getComponent("parallelAxis",e),l=o[n];s.set(l,a),p(a)&&(r.set(l,a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=n))}))}};function p(e){return"category"===e.get("type")}function v(e,t,p){p=p||{};var v,I=t.getSourceManager(),C=!1;e?(C=!0,v=s(e)):C=(v=I.getSource()).sourceFormat===r;var A=function(e){var n=e.get("coordinateSystem"),t=new y(n),s=D[n];if(s)return s(e,t,t.axisMap,t.categoryAxisMap),t}(t),S=function(e,n){var t,s=e.get("coordinateSystem"),r=m.get(s);return n&&n.coordSysDims&&(t=f(n.coordSysDims,(function(e){var t={name:e},s=n.axisMap.get(e);if(s){var r=s.get("type");t.type=x(r)}return t}))),t||(t=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),t}(t,A),M=p.useEncodeDefaulter,b=i(M)?M:M?a(o,S,t):null,h={coordDimensions:S,generateCoord:p.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:b,canOmitUnusedDimensions:!C},R=l(v,h),E=function(e,t,s){var r,i;return s&&n(e,(function(e,n){var a=e.coordDim,o=s.categoryAxisMap.get(a);o&&(null==r&&(r=n),e.ordinalMeta=o.getOrdinalMeta(),t&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(i=!0)})),i||null==r||(e[r].otherDims.itemName=0),r}(R.dimensions,p.createInvertedIndices,A),F=C?null:I.getSharedDataStore(R),N=d(t,{schema:R,store:F}),O=new c(R,t);O.setCalculationInfo(N);var w=null!=E&&function(e){if(e.sourceFormat===r){var n=function(e){var n=0;for(;n<e.length&&null==e[n];)n++;return e[n]}(e.data||[]);return!u(g(n))}}(v)?function(e,n,t,s){return s===E?t:this.defaultDimValueGetter(e,n,t,s)}:null;return O.hasItemOption=!1,O.initData(C?v:F,null,w),O}export{v as c};
