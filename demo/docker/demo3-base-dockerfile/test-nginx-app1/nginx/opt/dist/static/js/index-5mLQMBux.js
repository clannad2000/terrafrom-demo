function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,u,a,o=[],s=!0,l=!1;try{if(u=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=u.call(t)).done)&&(o.push(n.value),o.length!==r);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return o}}(e,r)||n(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u="0123456789",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$[].'\"",s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",c=" \n\r\t",f="initial",p="number",h="scientific",v="operator",d="bracket",_="var",g="symbol",y="percent",m="round",b="plus",w="comma",x="fraction",O="to-number",N="to-number-string",E=Array.isArray,A="object"==("undefined"==typeof global?"undefined":e(global))&&global&&global.Object===Object&&global,S="object"==("undefined"==typeof self?"undefined":e(self))&&self&&self.Object===Object&&self,j=A||S||Function("return this")(),k=j.Symbol,P=Object.prototype,I=P.hasOwnProperty,T=P.toString,R=k?k.toStringTag:void 0;var B=Object.prototype.toString;var $="[object Null]",C="[object Undefined]",D=k?k.toStringTag:void 0;function U(e){return null==e?void 0===e?C:$:D&&D in Object(e)?function(e){var r=I.call(e,R),t=e[R];try{e[R]=void 0;var n=!0}catch(u){}var i=T.call(e);return n&&(r?e[R]=t:delete e[R]),i}(e):function(e){return B.call(e)}(e)}var F="[object Symbol]";function L(r){return"symbol"==e(r)||function(r){return null!=r&&"object"==e(r)}(r)&&U(r)==F}var M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/;function G(r){var t=e(r);return null!=r&&("object"==t||"function"==t)}var q="[object AsyncFunction]",H="[object Function]",V="[object GeneratorFunction]",W="[object Proxy]";var X,Y=j["__core-js_shared__"],J=(X=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"";var Z=Function.prototype.toString;var K=/^\[object .+?Constructor\]$/,Q=Function.prototype,ee=Object.prototype,re=Q.toString,te=ee.hasOwnProperty,ne=RegExp("^"+re.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ie(e){return!(!G(e)||function(e){return!!J&&J in e}(e))&&(function(e){if(!G(e))return!1;var r=U(e);return r==H||r==V||r==q||r==W}(e)?ne:K).test(function(e){if(null!=e){try{return Z.call(e)}catch(r){}try{return e+""}catch(r){}}return""}(e))}function ue(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return ie(t)?t:void 0}var ae=ue(Object,"create");var oe=Object.prototype.hasOwnProperty;var se=Object.prototype.hasOwnProperty;function le(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function ce(e,r){return e===r||e!=e&&r!=r}function fe(e,r){for(var t=e.length;t--;)if(ce(e[t][0],r))return t;return-1}le.prototype.clear=function(){this.__data__=ae?ae(null):{},this.size=0},le.prototype.delete=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},le.prototype.get=function(e){var r=this.__data__;if(ae){var t=r[e];return"__lodash_hash_undefined__"===t?void 0:t}return oe.call(r,e)?r[e]:void 0},le.prototype.has=function(e){var r=this.__data__;return ae?void 0!==r[e]:se.call(r,e)},le.prototype.set=function(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=ae&&void 0===r?"__lodash_hash_undefined__":r,this};var pe=Array.prototype.splice;function he(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}he.prototype.clear=function(){this.__data__=[],this.size=0},he.prototype.delete=function(e){var r=this.__data__,t=fe(r,e);return!(t<0||(t==r.length-1?r.pop():pe.call(r,t,1),--this.size,0))},he.prototype.get=function(e){var r=this.__data__,t=fe(r,e);return t<0?void 0:r[t][1]},he.prototype.has=function(e){return fe(this.__data__,e)>-1},he.prototype.set=function(e,r){var t=this.__data__,n=fe(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this};var ve=ue(j,"Map");function de(r,t){var n=r.__data__;return function(r){var t=e(r);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r}(t)?n["string"==typeof t?"string":"hash"]:n.map}function _e(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}_e.prototype.clear=function(){this.size=0,this.__data__={hash:new le,map:new(ve||he),string:new le}},_e.prototype.delete=function(e){var r=de(this,e).delete(e);return this.size-=r?1:0,r},_e.prototype.get=function(e){return de(this,e).get(e)},_e.prototype.has=function(e){return de(this,e).has(e)},_e.prototype.set=function(e,r){var t=de(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this};var ge="Expected a function";function ye(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new TypeError(ge);var t=function t(){var n=arguments,i=r?r.apply(this,n):n[0],u=t.cache;if(u.has(i))return u.get(i);var a=e.apply(this,n);return t.cache=u.set(i,a)||u,a};return t.cache=new(ye.Cache||_e),t}ye.Cache=_e;var me,be,we,xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/\\(\\)?/g,Ne=(me=function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(xe,(function(e,t,n,i){r.push(n?i.replace(Oe,"$1"):t||e)})),r},be=ye(me,(function(e){return 500===we.size&&we.clear(),e})),we=be.cache,be),Ee=Ne;var Ae=1/0,Se=k?k.prototype:void 0,je=Se?Se.toString:void 0;function ke(e){if("string"==typeof e)return e;if(E(e))return function(e,r){for(var t=-1,n=null==e?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}(e,ke)+"";if(L(e))return je?je.call(e):"";var r=e+"";return"0"==r&&1/e==-Ae?"-0":r}function Pe(r,t){return E(r)?r:function(r,t){if(E(r))return!1;var n=e(r);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=r&&!L(r))||z.test(r)||!M.test(r)||null!=t&&r in Object(t)}(r,t)?[r]:Ee(function(e){return null==e?"":ke(e)}(r))}var Ie=1/0;function Te(e){if("string"==typeof e||L(e))return e;var r=e+"";return"0"==r&&1/e==-Ie?"-0":r}function Re(e,r,t){var n=null==e?void 0:function(e,r){for(var t=0,n=(r=Pe(r,e)).length;null!=e&&t<n;)e=e[Te(r[t++])];return t&&t==n?e:void 0}(e,r);return void 0===n?t:n}function Be(e){for(var r,t,n,i=[/^([+-]?[\d.]+(?:e|E)(?:\+|-)?\d+)(.*)$/,/^([+-]?[\d.]+)(.*)$/],u=0;u<i.length;u++){var a=e.match(i[u]);if(a){n=a;break}}if(n){t=n[1];var o=n[2];""!==o.trim()&&(r=o)}return{num:t,unit:r}}function $e(e,r,t){var n,i,u,a;return Array.isArray(e)?e.length>1?null!==(n=null!==(i=Re(e[0],r))&&void 0!==i?i:Re(e.at(-1),r))&&void 0!==n?n:t:1===e.length&&null!==(u=Re(e[0],r))&&void 0!==u?u:t:null!==(a=Re(e,r,t))&&void 0!==a?a:t}function Ce(e,r,t,n){var i=e.split("."),u=i[0],a=1===i.length?"":i[1],o=function(e,r,t,n,i){var u=e,a=r,o=r.length,s={"~-":function(){var e="<"===t?n-1:n;a=r.slice(0,e)},"~+":function(){var e="<"===t?n-1:n;if(!(o<=e||0===o)){var i=r.slice(0,e);0==+r.slice(e,o)?a=i:(i=(+"9".concat(i)+1).toString().slice(1)).length>e?(a=i.slice(1,i.length),u=(+u+1).toString()):a=i}},"~5":function(){if(0!==o){var e="<"===t?n-1:n;a=r.slice(0,e);var i=+r[e];Number.isNaN(i)||i>=5&&(a=(+"9".concat(a)+1).toString().slice(1)).length>e&&(a=a.slice(1,a.length),u=(+u+1).toString())}},"~6":function(){if(0!==o){var i,s="<"===t?n-1:n,l=+r[s],c=r.slice(+s+1,r.length);c=""===c?0:parseInt(c),i=0===s?+e[e.length-1]:+r[s-1],a=r.slice(0,s),(l>=6||5===l&&c>0||5===l&&i%2!=0)&&(a=(+"9".concat(a)+1).toString().slice(1)).length>s&&(a=a.slice(1,a.length),u=(+u+1).toString())}}};return"<="===t?o<=n?a=r.replace(/0*$/,""):(s[i]&&s[i](),a=a.replace(/0+$/,"")):"<"===t?o<n?a=r.replace(/0*$/,""):(s[i]&&s[i](),a=a.replace(/0+$/,"")):"="===t?o<n?a=r+"0".repeat(n-o):o>n&&s[i]&&s[i]():">="===t?o<n&&(a=r+"0".repeat(n-o)):">"===t&&o<=n&&(a=r+"0".repeat(n-o+1)),{int_part:u,dec_part:a}}(u,a,r,+t,n);return u=o.int_part,""===(a=o.dec_part)?u:"".concat(u,".").concat(a)}function De(e){for(var r=e.length,t="";r>0;)t=e.substring(r-3,r)+(""!==t?",":"")+t,r-=3;return t}function Ue(e,r){if(Array.isArray(e)){for(var t,n=0,i=e.length;n<i;n++){var u;if(void 0!==(t=null!==(u=Re(e[n],r))&&void 0!==u?u:void 0))break}if(void 0===t)throw new Error("填充变量".concat(value,"失败"));return t}var a;return null!==(a=Re(e,r))&&void 0!==a?a:void 0}function Fe(e,r,t){var n;for(r++;r<t;){if(n=e[r],-1===c.indexOf(n))return n;r++}}function Le(e,r){if(r.curr_state===p||r.curr_state===h){var t=r.expr.slice(r.prev_index,r.cur_index);if(r._unit){var n,i=Be(t),u=i.num,a=i.unit;void 0===a?e.push({type:p,value:u,real_value:u,has_unit:!1}):(r.has_unit=!0,null!==(n=r.unit_str)&&void 0!==n||(r.unit_str=a),e.push({type:p,value:u,real_value:u,has_unit:!0,unit:a}))}else e.push({type:p,value:t,real_value:t,has_unit:!1})}else if(r.curr_state===_){r.has_var=!0;var o=r.expr.slice(r.prev_index,r.cur_index),s=Ue(r.fill_data,o);if(r._unit){var l,c=Be(s),v=c.num,d=c.unit;void 0===d?e.push({type:"var",value:o,real_value:v,has_unit:!1}):(r.has_unit=!0,null!==(l=r.unit_str)&&void 0!==l||(r.unit_str=d),e.push({type:"var",value:o,real_value:v,has_unit:!0,unit:d}))}else e.push({type:"var",value:o,real_value:s,has_unit:!1})}else e.push({type:r.curr_state,value:r.expr.slice(r.prev_index,r.cur_index)});r.curr_state=f,r.prev_index=r.cur_index}var Me=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ze=Math.ceil,Ge=Math.floor,qe="[BigNumber Error] ",He=qe+"Number primitive has more than 15 significant digits: ",Ve=1e14,We=14,Xe=9007199254740991,Ye=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Je=1e7,Ze=1e9;function Ke(e){var r=0|e;return e>0||e===r?r:r-1}function Qe(e){for(var r,t,n=1,i=e.length,u=e[0]+"";n<i;){for(r=e[n++]+"",t=We-r.length;t--;r="0"+r);u+=r}for(i=u.length;48===u.charCodeAt(--i););return u.slice(0,i+1||1)}function er(e,r){var t,n,i=e.c,u=r.c,a=e.s,o=r.s,s=e.e,l=r.e;if(!a||!o)return null;if(t=i&&!i[0],n=u&&!u[0],t||n)return t?n?0:-o:a;if(a!=o)return a;if(t=a<0,n=s==l,!i||!u)return n?0:!i^t?1:-1;if(!n)return s>l^t?1:-1;for(o=(s=i.length)<(l=u.length)?s:l,a=0;a<o;a++)if(i[a]!=u[a])return i[a]>u[a]^t?1:-1;return s==l?0:s>l^t?1:-1}function rr(e,r,t,n){if(e<r||e>t||e!==Ge(e))throw Error(qe+(n||"Argument")+("number"==typeof e?e<r||e>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function tr(e){var r=e.c.length-1;return Ke(e.e/We)==r&&e.c[r]%2!=0}function nr(e,r){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(r<0?"e":"e+")+r}function ir(e,r,t){var n,i;if(r<0){for(i=t+".";++r;i+=t);e=i+e}else if(++r>(n=e.length)){for(i=t,r-=n;--r;i+=t);e+=i}else r<n&&(e=e.slice(0,r)+"."+e.slice(r));return e}var ur=function r(t){var n,i,u,a,o,s,l,c,f,p,h=S.prototype={constructor:S,toString:null,valueOf:null},v=new S(1),d=20,_=4,g=-7,y=21,m=-1e7,b=1e7,w=!1,x=1,O=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},E="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function S(e,r){var t,n,a,o,s,l,c,f,p=this;if(!(p instanceof S))return new S(e,r);if(null==r){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>b?p.c=p.e=null:e.e<m?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((l="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,s=e;s>=10;s/=10,o++);return void(o>b?p.c=p.e=null:(p.e=o,p.c=[e]))}f=String(e)}else{if(!Me.test(f=String(e)))return u(p,f,l);p.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(o=f.indexOf("."))>-1&&(f=f.replace(".","")),(s=f.search(/e/i))>0?(o<0&&(o=s),o+=+f.slice(s+1),f=f.substring(0,s)):o<0&&(o=f.length)}else{if(rr(r,2,E.length,"Base"),10==r&&A)return I(p=new S(e),d+p.e+1,_);if(f=String(e),l="number"==typeof e){if(0*e!=0)return u(p,f,l,r);if(p.s=1/e<0?(f=f.slice(1),-1):1,S.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(He+e)}else p.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(t=E.slice(0,r),o=s=0,c=f.length;s<c;s++)if(t.indexOf(n=f.charAt(s))<0){if("."==n){if(s>o){o=c;continue}}else if(!a&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){a=!0,s=-1,o=0;continue}return u(p,String(e),l,r)}l=!1,(o=(f=i(f,r,10,p.s)).indexOf("."))>-1?f=f.replace(".",""):o=f.length}for(s=0;48===f.charCodeAt(s);s++);for(c=f.length;48===f.charCodeAt(--c););if(f=f.slice(s,++c)){if(c-=s,l&&S.DEBUG&&c>15&&(e>Xe||e!==Ge(e)))throw Error(He+p.s*e);if((o=o-s-1)>b)p.c=p.e=null;else if(o<m)p.c=[p.e=0];else{if(p.e=o,p.c=[],s=(o+1)%We,o<0&&(s+=We),s<c){for(s&&p.c.push(+f.slice(0,s)),c-=We;s<c;)p.c.push(+f.slice(s,s+=We));s=We-(f=f.slice(s)).length}else s-=c;for(;s--;f+="0");p.c.push(+f)}}else p.c=[p.e=0]}function j(e,r,t,n){var i,u,a,o,s;if(null==t?t=_:rr(t,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==r)s=Qe(e.c),s=1==n||2==n&&(a<=g||a>=y)?nr(s,a):ir(s,a,"0");else if(u=(e=I(new S(e),r,t)).e,o=(s=Qe(e.c)).length,1==n||2==n&&(r<=u||u<=g)){for(;o<r;s+="0",o++);s=nr(s,u)}else if(r-=a,s=ir(s,u,"0"),u+1>o){if(--r>0)for(s+=".";r--;s+="0");}else if((r+=u-o)>0)for(u+1==o&&(s+=".");r--;s+="0");return e.s<0&&i?"-"+s:s}function k(e,r){for(var t,n=1,i=new S(e[0]);n<e.length;n++){if(!(t=new S(e[n])).s){i=t;break}r.call(i,t)&&(i=t)}return i}function P(e,r,t){for(var n=1,i=r.length;!r[--i];r.pop());for(i=r[0];i>=10;i/=10,n++);return(t=n+t*We-1)>b?e.c=e.e=null:t<m?e.c=[e.e=0]:(e.e=t,e.c=r),e}function I(e,r,t,n){var i,u,a,o,s,l,c,f=e.c,p=Ye;if(f){e:{for(i=1,o=f[0];o>=10;o/=10,i++);if((u=r-i)<0)u+=We,a=r,c=(s=f[l=0])/p[i-a-1]%10|0;else if((l=ze((u+1)/We))>=f.length){if(!n)break e;for(;f.length<=l;f.push(0));s=c=0,i=1,a=(u%=We)-We+1}else{for(s=o=f[l],i=1;o>=10;o/=10,i++);c=(a=(u%=We)-We+i)<0?0:s/p[i-a-1]%10|0}if(n=n||r<0||null!=f[l+1]||(a<0?s:s%p[i-a-1]),n=t<4?(c||n)&&(0==t||t==(e.s<0?3:2)):c>5||5==c&&(4==t||n||6==t&&(u>0?a>0?s/p[i-a]:0:f[l-1])%10&1||t==(e.s<0?8:7)),r<1||!f[0])return f.length=0,n?(r-=e.e+1,f[0]=p[(We-r%We)%We],e.e=-r||0):f[0]=e.e=0,e;if(0==u?(f.length=l,o=1,l--):(f.length=l+1,o=p[We-u],f[l]=a>0?Ge(s/p[i-a]%p[a])*o:0),n)for(;;){if(0==l){for(u=1,a=f[0];a>=10;a/=10,u++);for(a=f[0]+=o,o=1;a>=10;a/=10,o++);u!=o&&(e.e++,f[0]==Ve&&(f[0]=1));break}if(f[l]+=o,f[l]!=Ve)break;f[l--]=0,o=1}for(u=f.length;0===f[--u];f.pop());}e.e>b?e.c=e.e=null:e.e<m&&(e.c=[e.e=0])}return e}function T(e){var r,t=e.e;return null===t?e.toString():(r=Qe(e.c),r=t<=g||t>=y?nr(r,t):ir(r,t,"0"),e.s<0?"-"+r:r)}return S.clone=r,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(r){var t,n;if(null!=r){if("object"!=e(r))throw Error(qe+"Object expected: "+r);if(r.hasOwnProperty(t="DECIMAL_PLACES")&&(rr(n=r[t],0,Ze,t),d=n),r.hasOwnProperty(t="ROUNDING_MODE")&&(rr(n=r[t],0,8,t),_=n),r.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=r[t])&&n.pop?(rr(n[0],-Ze,0,t),rr(n[1],0,Ze,t),g=n[0],y=n[1]):(rr(n,-Ze,Ze,t),g=-(y=n<0?-n:n))),r.hasOwnProperty(t="RANGE"))if((n=r[t])&&n.pop)rr(n[0],-Ze,-1,t),rr(n[1],1,Ze,t),m=n[0],b=n[1];else{if(rr(n,-Ze,Ze,t),!n)throw Error(qe+t+" cannot be zero: "+n);m=-(b=n<0?-n:n)}if(r.hasOwnProperty(t="CRYPTO")){if((n=r[t])!==!!n)throw Error(qe+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error(qe+"crypto unavailable");w=n}else w=n}if(r.hasOwnProperty(t="MODULO_MODE")&&(rr(n=r[t],0,9,t),x=n),r.hasOwnProperty(t="POW_PRECISION")&&(rr(n=r[t],0,Ze,t),O=n),r.hasOwnProperty(t="FORMAT")){if("object"!=e(n=r[t]))throw Error(qe+t+" not an object: "+n);N=n}if(r.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=r[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(qe+t+" invalid: "+n);A="0123456789"==n.slice(0,10),E=n}}return{DECIMAL_PLACES:d,ROUNDING_MODE:_,EXPONENTIAL_AT:[g,y],RANGE:[m,b],CRYPTO:w,MODULO_MODE:x,POW_PRECISION:O,FORMAT:N,ALPHABET:E}},S.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!S.DEBUG)return!0;var r,t,n=e.c,i=e.e,u=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===u||-1===u)&&i>=-Ze&&i<=Ze&&i===Ge(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((r=(i+1)%We)<1&&(r+=We),String(n[0]).length==r){for(r=0;r<n.length;r++)if((t=n[r])<0||t>=Ve||t!==Ge(t))break e;if(0!==t)return!0}}}else if(null===n&&null===i&&(null===u||1===u||-1===u))return!0;throw Error(qe+"Invalid BigNumber: "+e)},S.maximum=S.max=function(){return k(arguments,h.lt)},S.minimum=S.min=function(){return k(arguments,h.gt)},S.random=(a=9007199254740992,o=Math.random()*a&2097151?function(){return Ge(Math.random()*a)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var r,t,n,i,u,a=0,s=[],l=new S(v);if(null==e?e=d:rr(e,0,Ze),i=ze(e/We),w)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(u=131072*r[a]+(r[a+1]>>>11))>=9e15?(t=crypto.getRandomValues(new Uint32Array(2)),r[a]=t[0],r[a+1]=t[1]):(s.push(u%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw w=!1,Error(qe+"crypto unavailable");for(r=crypto.randomBytes(i*=7);a<i;)(u=281474976710656*(31&r[a])+1099511627776*r[a+1]+4294967296*r[a+2]+16777216*r[a+3]+(r[a+4]<<16)+(r[a+5]<<8)+r[a+6])>=9e15?crypto.randomBytes(7).copy(r,a):(s.push(u%1e14),a+=7);a=i/7}if(!w)for(;a<i;)(u=o())<9e15&&(s[a++]=u%1e14);for(i=s[--a],e%=We,i&&e&&(u=Ye[We-e],s[a]=Ge(i/u)*u);0===s[a];s.pop(),a--);if(a<0)s=[n=0];else{for(n=-1;0===s[0];s.splice(0,1),n-=We);for(a=1,u=s[0];u>=10;u/=10,a++);a<We&&(n-=We-a)}return l.e=n,l.c=s,l}),S.sum=function(){for(var e=1,r=arguments,t=new S(r[0]);e<r.length;)t=t.plus(r[e++]);return t},i=function(){var e="0123456789";function r(e,r,t,n){for(var i,u,a=[0],o=0,s=e.length;o<s;){for(u=a.length;u--;a[u]*=r);for(a[0]+=n.indexOf(e.charAt(o++)),i=0;i<a.length;i++)a[i]>t-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/t|0,a[i]%=t)}return a.reverse()}return function(t,i,u,a,o){var s,l,c,f,p,h,v,g,y=t.indexOf("."),m=d,b=_;for(y>=0&&(f=O,O=0,t=t.replace(".",""),h=(g=new S(i)).pow(t.length-y),O=f,g.c=r(ir(Qe(h.c),h.e,"0"),10,u,e),g.e=g.c.length),c=f=(v=r(t,i,u,o?(s=E,e):(s=e,E))).length;0==v[--f];v.pop());if(!v[0])return s.charAt(0);if(y<0?--c:(h.c=v,h.e=c,h.s=a,v=(h=n(h,g,m,b,u)).c,p=h.r,c=h.e),y=v[l=c+m+1],f=u/2,p=p||l<0||null!=v[l+1],p=b<4?(null!=y||p)&&(0==b||b==(h.s<0?3:2)):y>f||y==f&&(4==b||p||6==b&&1&v[l-1]||b==(h.s<0?8:7)),l<1||!v[0])t=p?ir(s.charAt(1),-m,s.charAt(0)):s.charAt(0);else{if(v.length=l,p)for(--u;++v[--l]>u;)v[l]=0,l||(++c,v=[1].concat(v));for(f=v.length;!v[--f];);for(y=0,t="";y<=f;t+=s.charAt(v[y++]));t=ir(t,c,s.charAt(0))}return t}}(),n=function(){function e(e,r,t){var n,i,u,a,o=0,s=e.length,l=r%Je,c=r/Je|0;for(e=e.slice();s--;)o=((i=l*(u=e[s]%Je)+(n=c*u+(a=e[s]/Je|0)*l)%Je*Je+o)/t|0)+(n/Je|0)+c*a,e[s]=i%t;return o&&(e=[o].concat(e)),e}function r(e,r,t,n){var i,u;if(t!=n)u=t>n?1:-1;else for(i=u=0;i<t;i++)if(e[i]!=r[i]){u=e[i]>r[i]?1:-1;break}return u}function t(e,r,t,n){for(var i=0;t--;)e[t]-=i,i=e[t]<r[t]?1:0,e[t]=i*n+e[t]-r[t];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,u,a,o){var s,l,c,f,p,h,v,d,_,g,y,m,b,w,x,O,N,E=n.s==i.s?1:-1,A=n.c,j=i.c;if(!(A&&A[0]&&j&&j[0]))return new S(n.s&&i.s&&(A?!j||A[0]!=j[0]:j)?A&&0==A[0]||!j?0*E:E/0:NaN);for(_=(d=new S(E)).c=[],E=u+(l=n.e-i.e)+1,o||(o=Ve,l=Ke(n.e/We)-Ke(i.e/We),E=E/We|0),c=0;j[c]==(A[c]||0);c++);if(j[c]>(A[c]||0)&&l--,E<0)_.push(1),f=!0;else{for(w=A.length,O=j.length,c=0,E+=2,(p=Ge(o/(j[0]+1)))>1&&(j=e(j,p,o),A=e(A,p,o),O=j.length,w=A.length),b=O,y=(g=A.slice(0,O)).length;y<O;g[y++]=0);N=j.slice(),N=[0].concat(N),x=j[0],j[1]>=o/2&&x++;do{if(p=0,(s=r(j,g,O,y))<0){if(m=g[0],O!=y&&(m=m*o+(g[1]||0)),(p=Ge(m/x))>1)for(p>=o&&(p=o-1),v=(h=e(j,p,o)).length,y=g.length;1==r(h,g,v,y);)p--,t(h,O<v?N:j,v,o),v=h.length,s=1;else 0==p&&(s=p=1),v=(h=j.slice()).length;if(v<y&&(h=[0].concat(h)),t(g,h,y,o),y=g.length,-1==s)for(;r(j,g,O,y)<1;)p++,t(g,O<y?N:j,y,o),y=g.length}else 0===s&&(p++,g=[0]);_[c++]=p,g[0]?g[y++]=A[b]||0:(g=[A[b]],y=1)}while((b++<w||null!=g[0])&&E--);f=null!=g[0],_[0]||_.splice(0,1)}if(o==Ve){for(c=1,E=_[0];E>=10;E/=10,c++);I(d,u+(d.e=c+l*We-1)+1,a,f)}else d.e=l,d.r=+f;return d}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,c=/^\.([^.]+)$/,f=/^-?(Infinity|NaN)$/,p=/^\s*\+(?=[\w.])|^\s+|\s+$/g,u=function(e,r,t,n){var i,u=t?r:r.replace(p,"");if(f.test(u))e.s=isNaN(u)?null:u<0?-1:1;else{if(!t&&(u=u.replace(s,(function(e,r,t){return i="x"==(t=t.toLowerCase())?16:"b"==t?2:8,n&&n!=i?e:r})),n&&(i=n,u=u.replace(l,"$1").replace(c,"0.$1")),r!=u))return new S(u,i);if(S.DEBUG)throw Error(qe+"Not a"+(n?" base "+n:"")+" number: "+r);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new S(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,r){return er(this,new S(e,r))},h.decimalPlaces=h.dp=function(e,r){var t,n,i,u=this;if(null!=e)return rr(e,0,Ze),null==r?r=_:rr(r,0,8),I(new S(u),e+u.e+1,r);if(!(t=u.c))return null;if(n=((i=t.length-1)-Ke(this.e/We))*We,i=t[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},h.dividedBy=h.div=function(e,r){return n(this,new S(e,r),d,_)},h.dividedToIntegerBy=h.idiv=function(e,r){return n(this,new S(e,r),0,1)},h.exponentiatedBy=h.pow=function(e,r){var t,n,i,u,a,o,s,l,c=this;if((e=new S(e)).c&&!e.isInteger())throw Error(qe+"Exponent not an integer: "+T(e));if(null!=r&&(r=new S(r)),a=e.e>14,!c.c||!c.c[0]||1==c.c[0]&&!c.e&&1==c.c.length||!e.c||!e.c[0])return l=new S(Math.pow(+T(c),a?e.s*(2-tr(e)):+T(e))),r?l.mod(r):l;if(o=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new S(NaN);(n=!o&&c.isInteger()&&r.isInteger())&&(c=c.mod(r))}else{if(e.e>9&&(c.e>0||c.e<-1||(0==c.e?c.c[0]>1||a&&c.c[1]>=24e7:c.c[0]<8e13||a&&c.c[0]<=9999975e7)))return u=c.s<0&&tr(e)?-0:0,c.e>-1&&(u=1/u),new S(o?1/u:u);O&&(u=ze(O/We+2))}for(a?(t=new S(.5),o&&(e.s=1),s=tr(e)):s=(i=Math.abs(+T(e)))%2,l=new S(v);;){if(s){if(!(l=l.times(c)).c)break;u?l.c.length>u&&(l.c.length=u):n&&(l=l.mod(r))}if(i){if(0===(i=Ge(i/2)))break;s=i%2}else if(I(e=e.times(t),e.e+1,1),e.e>14)s=tr(e);else{if(0==(i=+T(e)))break;s=i%2}c=c.times(c),u?c.c&&c.c.length>u&&(c.c.length=u):n&&(c=c.mod(r))}return n?l:(o&&(l=v.div(l)),r?l.mod(r):u?I(l,O,_,void 0):l)},h.integerValue=function(e){var r=new S(this);return null==e?e=_:rr(e,0,8),I(r,r.e+1,e)},h.isEqualTo=h.eq=function(e,r){return 0===er(this,new S(e,r))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,r){return er(this,new S(e,r))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,r){return 1===(r=er(this,new S(e,r)))||0===r},h.isInteger=function(){return!!this.c&&Ke(this.e/We)>this.c.length-2},h.isLessThan=h.lt=function(e,r){return er(this,new S(e,r))<0},h.isLessThanOrEqualTo=h.lte=function(e,r){return-1===(r=er(this,new S(e,r)))||0===r},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,r){var t,n,i,u,a=this,o=a.s;if(r=(e=new S(e,r)).s,!o||!r)return new S(NaN);if(o!=r)return e.s=-r,a.plus(e);var s=a.e/We,l=e.e/We,c=a.c,f=e.c;if(!s||!l){if(!c||!f)return c?(e.s=-r,e):new S(f?a:NaN);if(!c[0]||!f[0])return f[0]?(e.s=-r,e):new S(c[0]?a:3==_?-0:0)}if(s=Ke(s),l=Ke(l),c=c.slice(),o=s-l){for((u=o<0)?(o=-o,i=c):(l=s,i=f),i.reverse(),r=o;r--;i.push(0));i.reverse()}else for(n=(u=(o=c.length)<(r=f.length))?o:r,o=r=0;r<n;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}if(u&&(i=c,c=f,f=i,e.s=-e.s),(r=(n=f.length)-(t=c.length))>0)for(;r--;c[t++]=0);for(r=Ve-1;n>o;){if(c[--n]<f[n]){for(t=n;t&&!c[--t];c[t]=r);--c[t],c[n]+=Ve}c[n]-=f[n]}for(;0==c[0];c.splice(0,1),--l);return c[0]?P(e,c,l):(e.s=3==_?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,r){var t,i,u=this;return e=new S(e,r),!u.c||!e.s||e.c&&!e.c[0]?new S(NaN):!e.c||u.c&&!u.c[0]?new S(u):(9==x?(i=e.s,e.s=1,t=n(u,e,0,3),e.s=i,t.s*=i):t=n(u,e,0,x),(e=u.minus(t.times(e))).c[0]||1!=x||(e.s=u.s),e)},h.multipliedBy=h.times=function(e,r){var t,n,i,u,a,o,s,l,c,f,p,h,v,d,_,g=this,y=g.c,m=(e=new S(e,r)).c;if(!(y&&m&&y[0]&&m[0]))return!g.s||!e.s||y&&!y[0]&&!m||m&&!m[0]&&!y?e.c=e.e=e.s=null:(e.s*=g.s,y&&m?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=Ke(g.e/We)+Ke(e.e/We),e.s*=g.s,(s=y.length)<(f=m.length)&&(v=y,y=m,m=v,i=s,s=f,f=i),i=s+f,v=[];i--;v.push(0));for(d=Ve,_=Je,i=f;--i>=0;){for(t=0,p=m[i]%_,h=m[i]/_|0,u=i+(a=s);u>i;)t=((l=p*(l=y[--a]%_)+(o=h*l+(c=y[a]/_|0)*p)%_*_+v[u]+t)/d|0)+(o/_|0)+h*c,v[u--]=l%d;v[u]=t}return t?++n:v.splice(0,1),P(e,v,n)},h.negated=function(){var e=new S(this);return e.s=-e.s||null,e},h.plus=function(e,r){var t,n=this,i=n.s;if(r=(e=new S(e,r)).s,!i||!r)return new S(NaN);if(i!=r)return e.s=-r,n.minus(e);var u=n.e/We,a=e.e/We,o=n.c,s=e.c;if(!u||!a){if(!o||!s)return new S(i/0);if(!o[0]||!s[0])return s[0]?e:new S(o[0]?n:0*i)}if(u=Ke(u),a=Ke(a),o=o.slice(),i=u-a){for(i>0?(a=u,t=s):(i=-i,t=o),t.reverse();i--;t.push(0));t.reverse()}for((i=o.length)-(r=s.length)<0&&(t=s,s=o,o=t,r=i),i=0;r;)i=(o[--r]=o[r]+s[r]+i)/Ve|0,o[r]=Ve===o[r]?0:o[r]%Ve;return i&&(o=[i].concat(o),++a),P(e,o,a)},h.precision=h.sd=function(e,r){var t,n,i,u=this;if(null!=e&&e!==!!e)return rr(e,1,Ze),null==r?r=_:rr(r,0,8),I(new S(u),e,r);if(!(t=u.c))return null;if(n=(i=t.length-1)*We+1,i=t[i]){for(;i%10==0;i/=10,n--);for(i=t[0];i>=10;i/=10,n++);}return e&&u.e+1>n&&(n=u.e+1),n},h.shiftedBy=function(e){return rr(e,-9007199254740991,Xe),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,r,t,i,u,a=this,o=a.c,s=a.s,l=a.e,c=d+4,f=new S("0.5");if(1!==s||!o||!o[0])return new S(!s||s<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(s=Math.sqrt(+T(a)))||s==1/0?(((r=Qe(o)).length+l)%2==0&&(r+="0"),s=Math.sqrt(+r),l=Ke((l+1)/2)-(l<0||l%2),t=new S(r=s==1/0?"5e"+l:(r=s.toExponential()).slice(0,r.indexOf("e")+1)+l)):t=new S(s+""),t.c[0])for((s=(l=t.e)+c)<3&&(s=0);;)if(u=t,t=f.times(u.plus(n(a,u,c,1))),Qe(u.c).slice(0,s)===(r=Qe(t.c)).slice(0,s)){if(t.e<l&&--s,"9999"!=(r=r.slice(s-3,s+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(I(t,t.e+d+2,1),e=!t.times(t).eq(a));break}if(!i&&(I(u,u.e+d+2,0),u.times(u).eq(a))){t=u;break}c+=4,s+=4,i=1}return I(t,t.e+d+1,_,e)},h.toExponential=function(e,r){return null!=e&&(rr(e,0,Ze),e++),j(this,e,r,1)},h.toFixed=function(e,r){return null!=e&&(rr(e,0,Ze),e=e+this.e+1),j(this,e,r)},h.toFormat=function(r,t,n){var i,u=this;if(null==n)null!=r&&t&&"object"==e(t)?(n=t,t=null):r&&"object"==e(r)?(n=r,r=t=null):n=N;else if("object"!=e(n))throw Error(qe+"Argument not an object: "+n);if(i=u.toFixed(r,t),u.c){var a,o=i.split("."),s=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",f=o[0],p=o[1],h=u.s<0,v=h?f.slice(1):f,d=v.length;if(l&&(a=s,s=l,l=a,d-=a),s>0&&d>0){for(a=d%s||s,f=v.substr(0,a);a<d;a+=s)f+=c+v.substr(a,s);l>0&&(f+=c+v.slice(a)),h&&(f="-"+f)}i=p?f+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?p.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):p):f}return(n.prefix||"")+i+(n.suffix||"")},h.toFraction=function(e){var r,t,i,u,a,o,s,l,c,f,p,h,d=this,g=d.c;if(null!=e&&(!(s=new S(e)).isInteger()&&(s.c||1!==s.s)||s.lt(v)))throw Error(qe+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+T(s));if(!g)return new S(d);for(r=new S(v),c=t=new S(v),i=l=new S(v),h=Qe(g),a=r.e=h.length-d.e-1,r.c[0]=Ye[(o=a%We)<0?We+o:o],e=!e||s.comparedTo(r)>0?a>0?r:c:s,o=b,b=1/0,s=new S(h),l.c[0]=0;f=n(s,r,0,1),1!=(u=t.plus(f.times(i))).comparedTo(e);)t=i,i=u,c=l.plus(f.times(u=c)),l=u,r=s.minus(f.times(u=r)),s=u;return u=n(e.minus(t),i,0,1),l=l.plus(u.times(c)),t=t.plus(u.times(i)),l.s=c.s=d.s,p=n(c,i,a*=2,_).minus(d).abs().comparedTo(n(l,t,a,_).minus(d).abs())<1?[c,i]:[l,t],b=o,p},h.toNumber=function(){return+T(this)},h.toPrecision=function(e,r){return null!=e&&rr(e,1,Ze),j(this,e,r,2)},h.toString=function(e){var r,t=this,n=t.s,u=t.e;return null===u?n?(r="Infinity",n<0&&(r="-"+r)):r="NaN":(null==e?r=u<=g||u>=y?nr(Qe(t.c),u):ir(Qe(t.c),u,"0"):10===e&&A?r=ir(Qe((t=I(new S(t),d+u+1,_)).c),t.e,"0"):(rr(e,2,E.length,"Base"),r=i(ir(Qe(t.c),u,"0"),10,e,n,!0)),n<0&&t.c[0]&&(r="-"+r)),r},h.valueOf=h.toJSON=function(){return T(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&S.set(t),S}();function ar(e,r){var t="";if("undefined"===(t=ur.isBigNumber(e)?e.toFixed():"string"==typeof e?e:e.toString())||"NaN"===t)return[void 0,{}];var n={mantissa:null,mantissa_type:null,thousands:!1,sign:!1,round:"~-",scientific:!1,fraction:!1,percent:!1,to_number:!1,to_number_string:!1};if(r.forEach((function(e){var r=e.type;if("symbol"===r){if(![">=","<=","=","<",">"].includes(e.value))throw new Error("错误的格式化参数:",e.value);n.mantissa_type=e.value}else if("to-number"===r)n.to_number=!0;else if("to-number-string"===r)n.to_number_string=!0;else if("comma"===r)n.thousands=!0;else if("number"===r)n.mantissa=e.value;else if("var"===r)n.mantissa=e.real_value;else if("plus"===r)n.sign=!0;else if("round"===r)n.round=e.value;else if("fraction"===r)n.fraction=!0;else if("scientific"===r)n.scientific=!0;else{if("percent"!==r)throw new Error("错误的fmt Token");n.percent=!0}})),n.to_number)return[+Ce(t,n.mantissa_type,n.mantissa,n.round),n];if(n.scientific){var i=ur(t).toExponential();return[n.sign&&!i.startsWith("-")?"+"+i:i,n]}if(n.fraction){var u=ur(t).toFraction().map((function(e){return e.toFixed()})).join("/");return[n.sign&&!u.startsWith("-")?"+"+u:u,n]}return n.percent&&(t=ur(t).times(100).toFixed()),null===n.mantissa?t.includes(".")&&(t=t.replace(/0*$/,"")):t=Ce(t,n.mantissa_type,n.mantissa,n.round),n.thousands&&(t=function(e){var r=e.split("."),t=r[0];return"-"===t[0]?r[0]="-"+De(t.slice(1)):r[0]=De(t),r.join(".")}(t)),n.sign&&(n.to_number=!1,t.startsWith("-")||(t="+"+t)),n.percent&&(t+="%"),[t,n]}var or=new Set(["+","-","*","/","%","**","//"]);function sr(e,r,t){if(Number.isNaN(Number(r)))if("-"===r||"+"===r)0===e.length||"operator"===e.at(-1).type||"("===e.at(-1).value?e.push({type:"number",value:r,real_value:r,has_unit:!1}):e.push({type:"operator",value:r});else if(or.has(r))e.push({type:"operator",value:r});else if(t._unit&&/^[+-]?\d/.test(r)){var n,i=Be(r),u=i.num,a=i.unit;void 0===a?e.push({type:"number",value:u,real_value:u,has_unit:!1}):(t.has_unit=!0,null!==(n=t.unit_str)&&void 0!==n||(t.unit_str=a),e.push({type:"number",value:u,real_value:u,has_unit:!0,unit:a}))}else if(s.includes(r[0])){t.has_var=!0;var o=Ue(t.fill_data,r);if(t._unit){var l,c=Be(o),f=c.num,p=c.unit;void 0===p?e.push({type:"var",value:r,real_value:f,has_unit:!1}):(t.has_unit=!0,null!==(l=t.unit_str)&&void 0!==l||(t.unit_str=p),e.push({type:"var",value:r,real_value:f,has_unit:!0,unit:p}))}else e.push({type:"var",value:r,real_value:o,has_unit:!1})}else{if(!/^[+-]?\d/.test(r))throw new Error("无法识别的标识符:".concat(r));var h=r.indexOf("e");-1!==h&&/^\d+$/.test(r.slice(h+1))&&e.push({type:"number",value:r,real_value:r,has_unit:!1})}else e.push({type:"number",value:r,real_value:r,has_unit:!1})}function lr(e,r,t){if(void 0===e||void 0===r)throw new Error("无效的操作数对：v1:".concat(e,", v2:").concat(r));switch(t){case"+":return new ur(e).plus(r);case"-":return new ur(e).minus(r);case"*":return new ur(e).times(r);case"/":return new ur(e).div(r);case"%":return new ur(e).mod(r);case"**":return new ur(e).pow(r);case"//":return new ur(e).idiv(r)}}var cr={"+":0,"-":0,"*":1,"/":1,"%":1,"//":1,"**":2};function fr(e,r,t,n,i){r===_?(i.has_var=!0,e.push({type:r,value:t,real_value:Ue(i.fill_data,t)})):e.push({type:r,value:t}),n.prev=n.curr,i.state=f}function pr(e,r){for(var t,n={prev:0,curr:0},i=e.length,s={state:f,fill_data:r,has_var:!1},l=[];n.curr<i;)switch(t=e[n.curr],s.state){case f:if(" "===t)n.curr++,n.prev=n.curr;else if("<>=".includes(t))s.state=g,n.curr++;else if(","===t)n.curr++,fr(l,w,",",n,s);else if(a.includes(t))s.state=_,n.curr++;else if(u.includes(t))s.state=p,n.curr++;else if("+"===t)n.curr++,fr(l,b,"+",n,s);else if("~"===t)n.curr++,s.state=m;else if("%"===t)n.curr++,fr(l,y,"%",n,s);else if("/"===t)n.curr++,fr(l,x,"/",n,s);else if("!"===t)if(s.state=f,n.curr++,"n"===e[n.curr])n.curr++,fr(l,O,"!n",n,s);else if("u"===e[n.curr])n.curr++,fr(l,N,"!u",n,s);else{if("e"!==e[n.curr])throw new Error("无法识别的!模式字符:".concat(e[n.curr]));n.curr++,fr(l,h,"!e",n,s)}else n.curr++,n.prev=n.curr;break;case g:"="===t&&n.curr++,fr(l,g,e.slice(n.prev,n.curr),n,s);break;case p:u.includes(t)?n.curr++:fr(l,p,e.slice(n.prev,n.curr),n,s);break;case _:o.includes(t)?n.curr++:fr(l,_,e.slice(n.prev,n.curr),n,s);break;case m:if(!("56+-".includes(t)&&n.curr-n.prev<2))throw new Error("错误的舍入语法:".concat(e.slice(n.prev,n.curr+1)));n.curr++,fr(l,m,e.slice(n.prev,n.curr),n,s);break;default:throw new Error("错误的fmt分词器状态")}return n.prev<n.curr&&fr(l,s.state,e.slice(n.prev,n.curr),n,s),l.has_var=s.has_var,l}var hr=new Set(["<",">","=",">=","<="]),vr=new Set(["~+","~-","~5","~6"]);function dr(e,r,t){if(","===r)e.push({type:w,value:","});else if(hr.has(r))e.push({type:g,value:r});else if(Number.isNaN(Number(r)))if(s.includes(r[0]))t.has_var=!0,e.push({type:_,value:r,real_value:Ue(t.fill_data,r)});else if("%"===r)e.push({type:y,value:r});else if("/"===r)e.push({type:x,value:r});else if("+"===r)e.push({type:state_plus,value:r});else if(vr.has(r))e.push({type:m,value:r});else if("!n"===r)e.push({type:O,value:r});else if("!u"===r)e.push({type:N,value:r});else{if("!e"!==r)throw new Error("无法识别的格式化字符: ".concat(r));e.push({type:h,value:r})}else e.push({type:p,value:r})}function _r(e,r){for(var t,n=0,i=e.length,u={fill_data:r,has_var:!1},a=0,o=[];n<i;)" "===(t=e[n])?(n>a&&dr(o,e.slice(a,n),u),a=n+1):"<>=".includes(t)&&("="===e[n+1]?(o.push({type:g,value:t+"="}),a=1+ ++n):(o.push({type:g,value:t}),a=n+1)),n++;return a<n&&dr(o,e.slice(a,n),u),o.has_var=u.has_var,o}function gr(n,i){var s=$e(i,"_error");try{var c,g,y,m,b,w=function(r,n){var i="",u={origin_expr:r,origin_fill_data:n,expr:"",fmt_expr:"",options:void 0,fill_data:void 0,_unit:void 0,_mode:void 0,_fmt:void 0};if(null!=n&&(u.options=n,Array.isArray(n)?u.fill_data=n:Array.isArray(n._fill_data)?u.fill_data=[n].concat(t(n._fill_data)):void 0===n._fill_data?u.fill_data=[n]:u.fill_data=[n,n._fill_data]),u._mode=$e(n,"_mode","normal"),u._unit=$e(n,"_unit",!1),u._fmt=$e(n,"_fmt"),"string"==typeof r){if(i=r,""===r.trim()||r.includes("NaN"))throw new Error("非法的表达式：".concat(r))}else{if("number"!=typeof r)throw new Error("错误的第一个参数类型: ".concat(r," 类型为:").concat(e(r)));if(isNaN(r))throw new Error("传入了一个非法数字NaN");i=r.toString()}var a=i.split("|");return u.expr=a[0],a.length>1&&(u.fmt_expr=a[1].trim()),u}(n,i),x=w._unit,O=w._mode,N="space"===O||"space-all"===O?function(e,r,t){for(var n,i=0,u=0,a=e.length,o=[],s={has_var:!1,has_unit:!1,unit_str:void 0,_unit:t,fill_data:r};u<a;)" "===(n=e[u])?(u>i&&sr(o,e.slice(i,u),s),i=u+1):"("===n?(o.push({type:d,value:"("}),i=u+1):")"===n&&(u>i&&sr(o,e.slice(i,u),s),o.push({type:d,value:")"}),i=u+1),u++;return u>i&&sr(o,e.slice(i,u),s),o.has_var=s.has_var,o.has_unit=s.has_unit,o.unit=s.unit_str,o}(w.expr,w.fill_data,x):function(e,r,t){for(var n,i={has_var:!1,has_unit:!1,unit_str:void 0,fill_data:r,cur_index:0,prev_index:0,curr_state:f,expr:e,_unit:t},s=e.length,c=[];i.cur_index<s;)switch(n=e[i.cur_index],i.curr_state){case f:if(u.includes(n))i.curr_state=p,i.cur_index++;else if(" "===n)i.cur_index++,i.prev_index=i.cur_index;else if("+-".includes(n)){var g=c.at(-1);0===i.cur_index||"operator"===(null==g?void 0:g.type)||"("===(null==g?void 0:g.value)?(i.curr_state=p,i.cur_index++):(i.cur_index++,c.push({type:v,value:e.slice(i.prev_index,i.cur_index)}),i.prev_index=i.cur_index)}else"*/%".includes(n)?(i.curr_state=v,i.cur_index++):a.includes(n)?(i.curr_state=_,i.cur_index++):"()".includes(n)?(c.push({type:d,value:n}),i.curr_state=f,i.cur_index++,i.prev_index=i.cur_index):(i.cur_index++,i.prev_index=i.cur_index);break;case p:if(u.includes(n))i.cur_index++;else if("."===n){if(i.cur_index===i.prev_index||e.slice(i.prev_index,i.cur_index).includes("."))throw new Error("非法的小数部分".concat(e.slice(i.prev_index,i.cur_index)));i.cur_index++}else"e"===n?(i.curr_state=h,i.cur_index++):t?"*/+-() ".indexOf(n)>-1||"%"===n&&u.includes(e[i.cur_index-1])&&l.includes(Fe(e,i.cur_index,s))?Le(c,i):i.cur_index++:Le(c,i);break;case v:var y=e[i.cur_index-1];"*"===n&&"*"===y?(i.cur_index++,c.push({type:v,value:"**"}),i.prev_index=i.cur_index):"/"===n&&"/"===y?(i.cur_index++,c.push({type:v,value:"//"}),i.prev_index=i.cur_index):(c.push({type:v,value:y}),i.prev_index=i.cur_index),i.curr_state=f;break;case _:o.includes(n)?i.cur_index++:Le(c,i);break;case h:if(u.includes(n))i.cur_index++;else if("+-".includes(n)){var m=i.prev_index;"+-".includes(e[m])&&(m+=1);var b=e.slice(m,i.cur_index),w=b.at(-1);b.includes(n)||"e"!==w?Le(c,i):i.cur_index++}else t&&-1==="*/+-() ".indexOf(n)?i.cur_index++:Le(c,i);break;default:throw new Error("字符扫描状态错误")}return i.prev_index<i.cur_index&&Le(c,i),c.has_var=i.has_var,c.has_unit=i.has_unit,c.unit=i.unit_str,c}(w.expr,w.fill_data,x),E=function(e){if(1===e.length){var r=e[0];if("number"===r.type||"var"===r.type)return r.real_value;throw new Error("错误的表达式：".concat(r.value))}for(var t,n,i=[],u=[],a=0,o=e.length;a<o;a++)if("number"!==(t=e[a]).type&&"var"!==t.type)if("operator"!==t.type)if("("!==t.value){if(")"===t.value)for(var s=void 0;s=i.pop();){if("("===s){var l=u.at(-2);if("-"===l){var c=u.pop();u.pop(),u.push(ur.isBigNumber(c)?c.negated():new ur(c).negated())}else if("+"===l){var f=u.pop();u.pop(),u.push(f)}break}var p=u.pop(),h=u.pop();u.push(lr(h,p,s))}}else i.push("(");else{var v=i.at(-1);if("("===v){i.push(t.value);continue}var d=cr[t.value];if(!i.length){i.push(t.value);continue}if(d<cr[v])for(var _=void 0;_=i.pop();){if("("===_){i.push("(");break}var g=u.pop(),y=u.pop();u.push(lr(y,g,_))}else if(d===cr[v]){if("**"===t.value){i.push(t.value);continue}for(var m=void 0;m=i.pop();){if("("===m){i.push("(");break}if(cr[m]<d){i.push(m);break}var b=u.pop(),w=u.pop();u.push(lr(w,b,m))}}i.push(t.value)}else u.push(t.real_value);for(;n=i.pop();){var x=u.pop(),O=u.pop();u.push(lr(O,x,n))}if(1!==u.length)throw new Error("可能出现了错误的计算式");return e.has_var||(e.calc_result=u[0]),u[0]}(N),A=ur.isBigNumber(E)?E:new ur(E);if("space-all"===O?(m=""===w.fmt_expr||void 0===w.fmt_expr?void 0:_r(w.fmt_expr,w.fill_data),b=""===w._fmt||void 0===w._fmt?void 0:_r(w._fmt,w.fill_data)):(m=""===w.fmt_expr||void 0===w.fmt_expr?void 0:pr(w.fmt_expr,w.fill_data),b=""===w._fmt||void 0===w._fmt?void 0:pr(w._fmt,w.fill_data)),void 0===m?void 0!==b&&(m=b):void 0!==b&&(m=[].concat(t(b),t(m))),void 0===m)A=A.toFixed();else{var S=r(ar(A,m),2);A=S[0],y=S[1]}if("Infinity"===A||"NaN"===A||void 0===A)throw new Error("计算错误可能是非法的计算式");return!N.has_unit||null!==(c=y)&&void 0!==c&&c.to_number||null!==(g=y)&&void 0!==g&&g.to_number_string||(A+=N.unit),A}catch(j){if(void 0===s)throw j;return s}}var yr=gr;export{gr as c,yr as f};
