var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;import{B as n}from"./index.esm.min-p6OgvXm7.js";import{N as i}from"./StatisticalCenter-fzPo9Omj.js";import{u as p}from"./useAutoScroll-cuZfK63C.js";import{d as c,Y as f,n as u,A as m,a0 as v,V as d,r as h,o as b,c as w,e as g,b as x,u as y,h as j,v as C,f as O,I as P,a5 as S,R as _,U as k,a1 as z,X as $,_ as R}from"./index-OtYEJMgP.js";import{e as U}from"./mitt-ei5ABelY.js";import{u as A,i as E}from"./installCanvasRenderer-kp6nwiR2.js";import{i as M}from"./install-wLyK8H0F.js";import{i as F}from"./install-q7ZRUXrs.js";import{i as I}from"./install-nwvgNUQF.js";import{i as V}from"./install-XFuIEcts.js";import{i as W}from"./install-50C6z8uZ.js";import"./Axis-xmqQ_bGV.js";import"./sectorHelper-nVwTOMBE.js";const D={class:"item"},H=(e=>(_("data-v-aabd37f9"),e=e(),k(),e))((()=>g("div",{class:"item-title"},[g("span",{class:"item-title-text"},"一体机使用情况")],-1))),L={class:"item-content table-container"},N={class:"w-full h-full flex flex-row items-center"},X={class:"w-1/3 h-full"},Y={class:"w-2/3 h-full"},q=c((B=((e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e})({},{name:"AioUsage"}),t(B,a({__name:"index",setup(e){A([M,F,I,V,W,E]);const t=f(),a=u((()=>t.value.layout.table.refs.bodyWrapper.firstElementChild.firstElementChild)),{start:o,stop:r}=p({scrollRef:a}),l=m(!1),s=v({text:0,data:[{name:"已使用",value:0,per:0},{name:"未使用",value:0,per:0}]}),c=u((()=>({title:{text:s.text,textStyle:{color:"#ffffff",fontSize:20,height:48},subtext:"总数",subtextStyle:{color:"#ffffff",fontSize:16},left:"center",top:"32%"},color:["#FEDC5E","#4AF1FC"],tooltip:{trigger:"item",formatter(e){const{marker:t,name:a="",value:o=0}=null!=e?e:{};return`${t} ${a}: ${o}`}},legend:{orient:"vertical",left:"center",bottom:"25%",data:["已使用","未使用"],textStyle:{color:"#fff",fontSize:14,rich:{name:{color:"#fff"},value:{padding:[0,8,0,8]},p:{color:"#fff"}}},itemWidth:8,itemHeight:8,formatter:function(e){const t=s.data;let a,o;for(let r=0;r<t.length;r++)t[r].name==e&&(a=t[r].value,o=t[r].per);return`{name| ${e}: }{value|${a},}{p|${o}%}`}},series:[{name:"总数",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center",rich:{percent:{fontSize:10,color:"inherit"}}},center:["50%","38%"],emphasis:{label:{show:!1,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:s.data}]}))),_=f([]),k=S((()=>{return e=this,t=null,a=function*(){r(),l.value=!0,Object.assign(s,{text:0,data:[{name:"已使用",value:0,per:0},{name:"未使用",value:0,per:0}]}),_.value=[],i().then((e=>{if(z!==e){const{wholeVo:t={allCount:0,usageCount:0,usagePercent:0,notUsageCount:0,notUsagePercent:0},cityOrgVos:a=[]}=e;s.text=t.allCount,s.data=[{name:"已使用",value:t.usageCount,per:t.usagePercent},{name:"未使用",value:t.notUsageCount,per:t.notUsagePercent}],console.log(s),_.value=a,$((()=>{o()}))}})).finally((()=>{l.value=!1}))},new Promise(((o,r)=>{var l=e=>{try{n(a.next(e))}catch(t){r(t)}},s=e=>{try{n(a.throw(e))}catch(t){r(t)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(l,s);n((a=a.apply(e,t)).next())}));var e,t,a}),1e3);return d((()=>{U.on("StatisticalCenterOverviewReload",(()=>{k()}))})),(e,a)=>{const l=h("el-table-column"),s=h("el-table"),i=h("el-auto-resizer");return b(),w("div",D,[H,g("div",L,[g("div",N,[g("div",X,[x(y(n),{ref:"chartRef",option:c.value,autoresize:""},null,8,["option"])]),g("div",Y,[x(i,null,{default:j((({height:e,width:a})=>[x(s,{ref_key:"tableRef",ref:t,class:"cursor-pointer",height:e,data:_.value,"show-overflow-tooltip":"",style:C({width:a+"px"}),onMouseover:y(r),onMouseleave:y(o)},{default:j((()=>[x(l,{prop:"cityOrgName",align:"center",label:"市级公司","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),x(l,{prop:"allCount",align:"center",label:"总数","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),x(l,{prop:"usageCount",align:"center",label:"已使用","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),x(l,{prop:"usagePercent",align:"center",label:"使用率","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}},{default:j((({row:e})=>[O(P(`${e.usagePercent}%`),1)])),_:1})])),_:2},1032,["height","data","style","onMouseover","onMouseleave"])])),_:1})])])])])}}}))));var B;const G=R(q,[["__scopeId","data-v-aabd37f9"]]);export{G as default};
