var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{d as r,z as i,A as p,a0 as u,F as c,H as f,r as g,j as d,w as m,o as b,c as v,e as h,b as w,h as _,u as y,aa as x,f as C,a1 as j,a6 as z}from"./index-OtYEJMgP.js";import{b as N,c as k}from"./ConfigManage-kSH0aid8.js";import{u as O}from"./useThrottle-fY6V1GyW.js";import{_ as P}from"./ParamConfigDialog.vue_vue_type_script_setup_true_lang-Q7Ji-ed6.js";const S={class:"h-full table-container"},D={class:"flex flex-col h-full gap-y-4"},I=r((U=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&n(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&n(e,l,a[l]);return e})({},{name:"ParamsConfigIndex"}),a(U,l({__name:"index",setup(e){const[a,{showDialog:l,setDialogProps:t}]=i(),o=p(!1),s=p(""),n=p([]),r=p([]),I=u({pageNum:1,pageSize:10,total:0}),[U,V]=O((()=>{I.pageNum=1,q()}),800,{debounce:!0}),M=function(){t({title:"新增配置"}),l(!0,{type:"add",data:null})},R=e=>{r.value=e.map((e=>e.id||""))},$=function(){o.value=!0;const e=r.value.join(",");N(e).then((e=>{j!==e&&(z.success("删除参数配置成功!"),I.pageNum=1,q())})).finally((()=>{o.value=!1}))},q=function(){o.value=!0;const{pageSize:e,pageNum:a}=I,l=s.value;k({configName:l,pageSize:e,pageNum:a}).then((e=>{if(j!==e&&e){const{rows:a=[],total:l=0}=e;n.value=a,I.total=Number(l)||0}})).finally((()=>{o.value=!1}))},A=()=>{I.pageNum=1,q()},E=()=>{q()};return c((()=>{q()})),f((()=>{V()})),(e,i)=>{const p=g("el-icon"),u=g("el-input"),c=g("el-form-item"),f=g("el-button"),j=g("el-form"),z=g("el-table-column"),N=g("el-table"),k=g("el-pagination"),O=d("loading");return m((b(),v("div",S,[h("div",D,[w(j,{inline:!0,"label-suffix":"：",class:"w-full table-query"},{default:_((()=>[w(c,null,{default:_((()=>[w(u,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),placeholder:"快速搜索配置",clearable:"",maxlength:"20",formatter:e=>e.replace(/^\s*|\s*$|\n/g,""),parser:e=>e.replace(/^\s*|\s*$|\n/g,""),onInput:y(U)},{prefix:_((()=>[w(p,{class:"el-input__icon"},{default:_((()=>[w(y(x))])),_:1})])),_:1},8,["modelValue","formatter","parser","onInput"])])),_:1}),w(c,null,{default:_((()=>[w(f,{class:"basic-button",disabled:o.value,onClick:M},{default:_((()=>[C(" 添加配置 ")])),_:1},8,["disabled"]),w(f,{class:"basic-button",disabled:o.value||!r.value.length,onClick:$},{default:_((()=>[C(" 删除配置 ")])),_:1},8,["disabled"])])),_:1})])),_:1}),w(N,{class:"w-full h-full",data:n.value,onSelectionChange:R},{default:_((()=>[w(z,{type:"selection",width:"55"}),w(z,{prop:"name",label:"配置项名称","min-width":"180",align:"left","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),w(z,{prop:"value",label:"参数值","min-width":"180","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"},align:"left"}),w(z,{prop:"remark",label:"备注","min-width":"180","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"},align:"left"}),w(z,{prop:"creationDate",label:"创建时间",width:"240",align:"left"}),w(z,{prop:"updateDate",label:"修改时间",width:"240",align:"left"}),w(z,{fixed:"right",label:"操作",width:"120",align:"right"},{default:_((({row:e})=>[w(f,{type:"primary",link:"",onClick:a=>{return o=e,t({title:"编辑配置"}),void l(!0,{type:"edit",data:o});var o}},{default:_((()=>[C(" 编辑 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),w(k,{"current-page":I.pageNum,"onUpdate:currentPage":i[1]||(i[1]=e=>I.pageNum=e),"page-size":I.pageSize,"onUpdate:pageSize":i[2]||(i[2]=e=>I.pageSize=e),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:I.total,"page-sizes":[10,20,30,40,50,100],onSizeChange:A,onCurrentChange:E},null,8,["current-page","page-size","total"])]),w(P,{onRegister:y(a),onConfirm:q},null,8,["onRegister"])])),[[O,o.value]])}}}))));var U;export{I as _};
