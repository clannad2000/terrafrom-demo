var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{C as p}from"./StatisticalCenter-fzPo9Omj.js";import{d as n,A as i,a0 as c,Y as g,a8 as u,X as m,H as w,r as b,j as d,o as f,g as h,h as x,w as v,c as y,e as N,I as k,b as C,u as O,a9 as P,a5 as S,a1 as j,_ as z}from"./index-OtYEJMgP.js";const D={class:"flex-1 flex flex-col gap-y-2 my-2"},I={class:"text-white text-sm"},_={class:"w-full flex flex-row items-center gap-x-4"},E={class:"text-white text-sm"},L={class:"text-white text-sm"},R=n((T=((e,a)=>{for(var t in a||(a={}))o.call(a,t)&&r(e,t,a[t]);if(s)for(var t of s(a))l.call(a,t)&&r(e,t,a[t]);return e})({},{name:"PlanPatrolLogDialog"}),a(T,t({__name:"PlanPatrolLogDialog",emits:["register","confirm"],setup(e,{emit:a}){const t=i(!1),s=c({taskId:"",taskName:"",cityOrgName:"",orgName:"",beginDate:"",endDate:"",ipSource:""}),o=c({pageNum:1,pageSize:10,total:0}),l=()=>{o.pageNum=1,n()},r=g([]),n=S((()=>{return e=this,a=null,l=function*(){t.value=!0,r.value=[];const{pageNum:e,pageSize:a}=o,{beginDate:l,endDate:n,ipSource:i,taskId:c}=s;yield p({beginDate:l,endDate:n,ipSource:i,taskId:c,pageNum:e,pageSize:a}).then((e=>{if(e&&j!==e){const{rows:a,total:t}=e;r.value=a||[],o.total=Number(t)||0}})).finally((()=>{t.value=!1}))},new Promise(((t,s)=>{var o=e=>{try{p(l.next(e))}catch(a){s(a)}},r=e=>{try{p(l.throw(e))}catch(a){s(a)}},p=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);p((l=l.apply(e,a)).next())}));var e,a,l}),1e3),[z,{closeDialog:R}]=u((e=>{const{type:a,data:t}=e;"view"===a&&(Object.keys(t).forEach((e=>{s[e]=t[e]})),m((()=>{n()})))})),T=function(){t.value=!1,R(),Object.keys(s).forEach((e=>{s[e]=""})),r.value=[]};return w((()=>{T()})),(e,a)=>{const p=b("el-table-column"),i=b("el-table"),c=b("el-pagination"),g=d("loading");return f(),h(O(P),{width:"960","show-close":!0,center:"","destroy-on-close":"","close-on-click-modal":!1,onClose:T,onRegister:O(z)},{default:x((()=>[v((f(),y("div",D,[N("span",I,"计划名称："+k(s.taskName),1),N("div",_,[N("span",E,"所属单位："+k(s.cityOrgName),1),N("span",L,"所属组织："+k(s.orgName),1)]),C(i,{class:"w-full h-[480px]",data:r.value},{default:x((()=>[C(p,{type:"index",label:"序号",width:"80",align:"center"},{default:x((e=>[N("span",null,k((o.pageNum-1)*o.pageSize+e.$index+1),1)])),_:1}),C(p,{prop:"userRealName",align:"center",label:"用户","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),C(p,{prop:"userName",align:"center",label:"账号","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),C(p,{prop:"beginTime",align:"center",label:"查看开始时间","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),C(p,{prop:"endTime",align:"center",label:"查看结束时间","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),C(p,{prop:"timeLongFormat",align:"center",label:"查看时长","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}}),C(p,{prop:"clientIp",align:"center",label:"IP地址","show-overflow-tooltip":{popperClass:"max-w-xs whitespace-break-spaces"}})])),_:1},8,["data"])])),[[g,t.value]]),C(c,{"current-page":o.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>o.pageNum=e),"page-size":o.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>o.pageSize=e),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:o.total,"page-sizes":[10,20,30,40,50,100],onSizeChange:l,onCurrentChange:O(n)},null,8,["current-page","page-size","total","onCurrentChange"])])),_:1},8,["onRegister"])}}}))));var T;const U=z(R,[["__scopeId","data-v-8d3b93d4"]]);export{U as default};
